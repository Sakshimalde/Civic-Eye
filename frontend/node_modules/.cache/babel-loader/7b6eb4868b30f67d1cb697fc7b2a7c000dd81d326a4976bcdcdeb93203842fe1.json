{"ast":null,"code":"import _objectSpread from\"C:/Users/saksh/OneDrive/Desktop/DS/civiceye/civiceye/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback,useMemo}from'react';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import{useAuth}from'../contexts/AuthContext';import{Search,Filter,MapPin,ArrowRight,BarChart3,Users,FileText,PlusCircle,Heart,MessageSquare,Eye,Clock,ChevronsDown,ThumbsDown,Edit,Save}from'lucide-react';import'./IssuesBrowser.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_BASE_URL='http://localhost:3000/api/v1';// Define API URL\n// --- Time utility ---\nconst getRelativeTime=isoDateString=>{const reportDate=new Date(isoDateString);const today=new Date();const startOfToday=new Date(today.getFullYear(),today.getMonth(),today.getDate());const startOfReportDay=new Date(reportDate.getFullYear(),reportDate.getMonth(),reportDate.getDate());const diffTime=startOfToday.getTime()-startOfReportDay.getTime();const diffDays=Math.floor(diffTime/(1000*60*60*24));if(diffDays===0){const hoursDiff=Math.floor((today.getTime()-reportDate.getTime())/(1000*60*60));if(hoursDiff===0)return'Just now';if(hoursDiff<24)return\"\".concat(hoursDiff,\" hours ago\");return'Today';}if(diffDays===1)return'Yesterday';if(diffDays<7)return\"\".concat(diffDays,\" days ago\");if(diffDays<30)return\"\".concat(Math.floor(diffDays/7),\" weeks ago\");return\"\".concat(Math.floor(diffDays/30),\" months ago\");};const getUserInitials=name=>{if(!name)return'JD';const nameParts=name.split(' ');const initials=nameParts.map(part=>part[0]).join('');return initials.toUpperCase();};const UserBrowseIssue=()=>{const{user,signOut}=useAuth();const navigate=useNavigate();const[authChecked,setAuthChecked]=useState(false);const[issues,setIssues]=useState([]);const[filteredIssues,setFilteredIssues]=useState([]);const[loading,setLoading]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[filters,setFilters]=useState({category:'All Categories',status:'All Statuses',sort:'Newest First'});const[userVotes,setUserVotes]=useState({});const[commentsOpen,setCommentsOpen]=useState({});const[commentsStore,setCommentsStore]=useState({});const[commentDrafts,setCommentDrafts]=useState({});const[busyComments,setBusyComments]=useState({});// Consistent state name\nconst[editingComment,setEditingComment]=useState(null);const categories=useMemo(()=>['All Categories','Garbage & Waste','Potholes','Water Issues','Street Lights','Vandalism','Other'],[]);const statusOptions=useMemo(()=>['All Statuses','Pending','In Progress','Resolved'],[]);const sortOptions=useMemo(()=>['Newest First','Oldest First','Most Voted','Most Viewed','Priority'],[]);const issueCategories=useMemo(()=>[{category:'Garbage & Waste',count:0,icon:'ðŸ—‘ï¸',color:'#E53E3E'},{category:'Potholes',count:0,icon:'ðŸ•³ï¸',color:'#DD6B20'},{category:'Water Issues',count:0,icon:'ðŸ’§',color:'#3182CE'},{category:'Street Lights',count:0,icon:'ðŸ’¡',color:'#D69E2E'},{category:'Vandalism',count:0,icon:'ðŸŽ¨',color:'#805AD5'},{category:'Other',count:0,icon:'ðŸ“‹',color:'#718096'}],[]);const communityImpact={issuesResolved:'89+',responseTime:'2.3 days avg',communityScore:'95%',activeUsers:'1.2k',totalReports:'2.8k'};const fetchIssues=useCallback(async()=>{if(!user)return;setLoading(true);const params={search:searchTerm.trim(),category:filters.category,status:filters.status,sort:filters.sort};try{const response=await axios.get(\"\".concat(API_BASE_URL,\"/complaints/all\"),{params:params,withCredentials:true});const fetchedIssues=response.data.data.map(comp=>{var _comp$address,_comp$userId,_comp$comments;const statusText=comp.status==='recived'?'Pending':comp.status==='inReview'?'In Progress':comp.status==='resolved'?'Resolved':'Pending';const locationText=((_comp$address=comp.address)===null||_comp$address===void 0?void 0:_comp$address[0])||'Unknown Location';const userName=typeof comp.userId==='object'&&(_comp$userId=comp.userId)!==null&&_comp$userId!==void 0&&_comp$userId.name?comp.userId.name:'Anonymous User';const reverseCategoryMap={'Municipal sanitation and public health':'Garbage & Waste','Roads and street infrastructure':'Potholes','Street lighting and electrical assets':'Street Lights','Water, sewerage, and stormwater':'Water Issues','Ward/zone office and central admin':'Vandalism'};const displayCategory=reverseCategoryMap[comp.assignedTo]||'Other';return{id:comp._id,title:comp.title,description:comp.description,location:locationText,category:displayCategory,status:statusText,createdAt:comp.createdAt,votes:0,comments:((_comp$comments=comp.comments)===null||_comp$comments===void 0?void 0:_comp$comments.length)||0,views:Math.floor(Math.random()*200),priority:['high','medium','low'][Math.floor(Math.random()*3)],urgency:'Community Concern',user:userName,userAvatar:getUserInitials(userName),counts:{upvote:0,downVote:0}};});setIssues(fetchedIssues);setFilteredIssues(fetchedIssues);const ids=fetchedIssues.map(i=>i.id).join(',');if(ids.length>0){try{const userVotesResp=await axios.get(\"\".concat(API_BASE_URL,\"/votes/user-votes\"),{params:{issues:ids},withCredentials:true});setUserVotes(userVotesResp.data.data||{});}catch(err){var _err$response;console.warn(\"Failed to fetch user votes:\",((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data)||err.message);}}const countsPromises=fetchedIssues.map(i=>axios.get(\"\".concat(API_BASE_URL,\"/votes/\").concat(i.id),{withCredentials:true}).then(r=>({id:i.id,counts:r.data.data})).catch(()=>({id:i.id,counts:{upvote:0,downVote:0}})));const countsResults=await Promise.all(countsPromises);const countsMap=countsResults.reduce((acc,item)=>{acc[item.id]=item.counts;return acc;},{});const issuesWithCounts=fetchedIssues.map(i=>_objectSpread(_objectSpread({},i),{},{counts:countsMap[i.id]||{upvote:0,downVote:0}}));setIssues(issuesWithCounts);setFilteredIssues(issuesWithCounts);}catch(error){var _error$response;console.error(\"Failed to fetch issues:\",((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);setIssues([]);setFilteredIssues([]);}finally{setLoading(false);}},[user,searchTerm,filters]);useEffect(()=>{const checkAuthStatus=async()=>{await new Promise(resolve=>setTimeout(resolve,50));setAuthChecked(true);};checkAuthStatus();},[]);useEffect(()=>{if(!authChecked)return;if(!user){navigate('/login');}else{fetchIssues();}},[user,navigate,fetchIssues,authChecked]);// --- VOTE Handler (Upvote & Downvote) ---\nconst handleVote=async(issueId,voteType)=>{if(!user){alert(\"Please login to vote.\");return;}const currentUserVote=userVotes[issueId];let endpoint=\"\".concat(API_BASE_URL,\"/votes/\").concat(issueId,\"?category=\").concat(voteType);// Optimistic Update: Calculate new counts and new user vote state immediately\nconst updatedIssuesOptimistic=issues.map(issue=>{if(issue.id!==issueId)return issue;const counts=_objectSpread({},issue.counts);const prevUserVote=currentUserVote;// 1. Remove previous vote\nif(prevUserVote==='upvote')counts.upvote=Math.max(0,counts.upvote-1);if(prevUserVote==='downvote')counts.downVote=Math.max(0,counts.downVote-1);let newUserVote;if(prevUserVote===voteType){newUserVote=undefined;// toggled off\n}else{// 2. Add new vote\nif(voteType==='upvote')counts.upvote=(counts.upvote||0)+1;else counts.downVote=(counts.downVote||0)+1;newUserVote=voteType;}return _objectSpread(_objectSpread({},issue),{},{counts,_newUserVote:newUserVote});});// Apply the new user vote state permanently\nconst newUserVoteState=updatedIssuesOptimistic.reduce((acc,issue)=>{if(issue.id===issueId){acc[issue.id]=issue._newUserVote;}else if(userVotes.hasOwnProperty(issue.id)){acc[issue.id]=userVotes[issue.id];}delete issue._newUserVote;return acc;},{});setUserVotes(newUserVoteState);setIssues(updatedIssuesOptimistic);setFilteredIssues(updatedIssuesOptimistic);try{const resp=await axios.post(endpoint,{},{withCredentials:true});const returned=resp.data.data;const returnedCounts=(returned===null||returned===void 0?void 0:returned.counts)||resp.data.data;if(returnedCounts){setIssues(prev=>prev.map(i=>i.id===issueId?_objectSpread(_objectSpread({},i),{},{counts:returnedCounts}):i));setFilteredIssues(prev=>prev.map(i=>i.id===issueId?_objectSpread(_objectSpread({},i),{},{counts:returnedCounts}):i));}}catch(error){var _error$response2,_error$response3,_error$response3$data;console.error(\"Vote action failed:\",((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data)||error.message);fetchIssues();alert(\"Vote action failed: \".concat(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Check network/server logic.'));}};// --- Comments: fetch for a single complaint ---\nconst fetchComments=async complaintId=>{setCommentsOpen(prev=>_objectSpread(_objectSpread({},prev),{},{[complaintId]:true}));if(commentsStore[complaintId])return;try{const resp=await axios.get(\"\".concat(API_BASE_URL,\"/comments/\").concat(complaintId),{withCredentials:true});setCommentsStore(prev=>_objectSpread(_objectSpread({},prev),{},{[complaintId]:resp.data.data}));}catch(err){var _err$response2;console.error(\"Failed to fetch comments\",((_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.data)||err.message);setCommentsStore(prev=>_objectSpread(_objectSpread({},prev),{},{[complaintId]:[]}));}};const toggleComments=complaintId=>{const isOpen=!!commentsOpen[complaintId];if(!isOpen){fetchComments(complaintId);}else{setCommentsOpen(prev=>_objectSpread(_objectSpread({},prev),{},{[complaintId]:false}));}};const handleCommentChange=(issueId,value)=>{setCommentDrafts(prev=>_objectSpread(_objectSpread({},prev),{},{[issueId]:value}));};const deleteComment=async(issueId,commentId)=>{if(!window.confirm(\"Are you sure you want to delete this comment?\"))return;const prevComments=commentsStore[issueId]||[];// Optimistic removal\nsetCommentsStore(prev=>_objectSpread(_objectSpread({},prev),{},{[issueId]:prev[issueId].filter(c=>c._id!==commentId)}));try{await axios.delete(\"\".concat(API_BASE_URL,\"/comments/\").concat(issueId,\"/\").concat(commentId),{withCredentials:true});// decrement comment count\nsetIssues(prev=>prev.map(i=>i.id===issueId?_objectSpread(_objectSpread({},i),{},{comments:(i.comments||1)-1}):i));setFilteredIssues(prev=>prev.map(i=>i.id===issueId?_objectSpread(_objectSpread({},i),{},{comments:(i.comments||1)-1}):i));}catch(err){var _err$response3;console.error(\"Failed to delete comment:\",((_err$response3=err.response)===null||_err$response3===void 0?void 0:_err$response3.data)||err.message);alert(\"Failed to delete comment\");// rollback\nsetCommentsStore(prev=>_objectSpread(_objectSpread({},prev),{},{[issueId]:prevComments}));}};// --- Start Editing Comment ---\nconst startEditComment=comment=>{setEditingComment({commentId:comment._id,content:comment.content});};// --- Update Comment Handler ---\nconst updateComment=async(issueId,commentId,newContent)=>{const trimmedContent=newContent.trim();if(!trimmedContent||trimmedContent===((editingComment===null||editingComment===void 0?void 0:editingComment.content)||'')){setEditingComment(null);return;}setBusyComments(prev=>_objectSpread(_objectSpread({},prev),{},{[commentId]:true}));const currentComment=commentsStore[issueId].find(c=>c._id===commentId);const prevContent=currentComment===null||currentComment===void 0?void 0:currentComment.content;const prevUpdatedAt=currentComment===null||currentComment===void 0?void 0:currentComment.updatedAt;// 1. Optimistic update\nsetCommentsStore(prev=>_objectSpread(_objectSpread({},prev),{},{[issueId]:prev[issueId].map(c=>c._id===commentId?_objectSpread(_objectSpread({},c),{},{content:trimmedContent,updatedAt:new Date().toISOString(),userId:currentComment.userId}):c)}));setEditingComment(null);try{// 2. API call to update the comment\nconst resp=await axios.put(\"\".concat(API_BASE_URL,\"/comments/\").concat(issueId,\"/\").concat(commentId),{content:trimmedContent},{withCredentials:true});const updated=resp.data.data;// 3. Final update from server response \nsetCommentsStore(prev=>_objectSpread(_objectSpread({},prev),{},{[issueId]:prev[issueId].map(c=>c._id===commentId?updated:c)}));}catch(err){var _err$response4;console.error(\"Failed to update comment\",((_err$response4=err.response)===null||_err$response4===void 0?void 0:_err$response4.data)||err.message);alert(\"Failed to update comment. Rolling back.\");// 4. Rollback on error\nsetCommentsStore(prev=>_objectSpread(_objectSpread({},prev),{},{[issueId]:prev[issueId].map(c=>c._id===commentId?_objectSpread(_objectSpread({},c),{},{content:prevContent,updatedAt:prevUpdatedAt}):c)}));// 5. Re-open edit state with old content for user to retry\nsetEditingComment({commentId,content:prevContent});}finally{setBusyComments(prev=>_objectSpread(_objectSpread({},prev),{},{[commentId]:false}));}};const postComment=useCallback(async issueId=>{const text=(commentDrafts[issueId]||'').trim();if(!text)return alert(\"Comment can't be empty\");setBusyComments(prev=>_objectSpread(_objectSpread({},prev),{},{[issueId]:true}));// --- Include current user details for optimistic comment and correct display ---\nconst tempComment={_id:\"temp-\".concat(Date.now()),userId:{_id:user._id,name:user.name},complaintId:issueId,content:text,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};// -------------------------------------------------------------------------------------\nsetCommentsStore(prev=>_objectSpread(_objectSpread({},prev),{},{[issueId]:[tempComment,...(prev[issueId]||[])]}));setCommentDrafts(prev=>_objectSpread(_objectSpread({},prev),{},{[issueId]:\"\"}));try{const resp=await axios.post(\"\".concat(API_BASE_URL,\"/comments/\").concat(issueId),{content:text},{withCredentials:true});const created=resp.data.data;// Replace temp comment with actual\nsetCommentsStore(prev=>_objectSpread(_objectSpread({},prev),{},{[issueId]:prev[issueId].map(c=>c._id===tempComment._id?created:c)}));// increment comment count on issue\nsetIssues(prev=>prev.map(i=>i.id===issueId?_objectSpread(_objectSpread({},i),{},{comments:(i.comments||0)+1}):i));setFilteredIssues(prev=>prev.map(i=>i.id===issueId?_objectSpread(_objectSpread({},i),{},{comments:(i.comments||0)+1}):i));}catch(err){var _err$response5;console.error(\"Failed to post comment\",((_err$response5=err.response)===null||_err$response5===void 0?void 0:_err$response5.data)||err.message);// rollback optimistic append\nsetCommentsStore(prev=>_objectSpread(_objectSpread({},prev),{},{[issueId]:(prev[issueId]||[]).filter(c=>c._id!==tempComment._id)}));alert(\"Failed to post comment\");}finally{setBusyComments(prev=>_objectSpread(_objectSpread({},prev),{},{[issueId]:false}));}},[commentDrafts,user]);// --- Other Handlers ---\nconst handleFilterChange=(filterType,value)=>{setFilters(prev=>_objectSpread(_objectSpread({},prev),{},{[filterType]:value}));};const handleSearchChange=e=>{setSearchTerm(e.target.value);};const handleLogout=()=>{axios.post(\"\".concat(API_BASE_URL,\"/users/logout\"),{},{withCredentials:true}).catch(()=>{}).finally(()=>{signOut();navigate('/');});};const clearFilters=()=>{setSearchTerm('');setFilters({category:'All Categories',status:'All Statuses',sort:'Newest First'});};if(!authChecked){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-state full-page-loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Checking authentication status...\"})]});}if(!user){return null;}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header-top\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"nav-links\",children:[/*#__PURE__*/_jsx(Link,{to:\"/volunteer-dashboard\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(Link,{to:\"/MyAssignedIssues\",children:\"My Assigned Issues\"}),/*#__PURE__*/_jsx(Link,{to:\"/volunteer-browser-issues\",className:\"active\",children:\"Browse Issues\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-profile\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/profile\",className:\"profile-link\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-initials\",children:getUserInitials(user.name)}),/*#__PURE__*/_jsx(\"span\",{className:\"user-name\",children:user.name})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-btn-header\",children:/*#__PURE__*/_jsx(ArrowRight,{size:20})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-hero\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hero-background\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"hero-content-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"hero-badge\",children:\"Community Platform\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Discover & Support Local Issues\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Join thousands of community members in identifying, voting, and resolving neighborhood concerns. Together we build better communities.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"hero-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hero-stat\",children:[/*#__PURE__*/_jsx(\"strong\",{children:communityImpact.totalReports}),/*#__PURE__*/_jsx(\"span\",{children:\"Issues Reported\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hero-stat\",children:[/*#__PURE__*/_jsx(\"strong\",{children:communityImpact.issuesResolved}),/*#__PURE__*/_jsx(\"span\",{children:\"Issues Resolved\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hero-stat\",children:[/*#__PURE__*/_jsx(\"strong\",{children:communityImpact.activeUsers}),/*#__PURE__*/_jsx(\"span\",{children:\"Active Members\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hero-buttons\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"hero-btn-primary\",onClick:()=>navigate('/report-issue'),children:[/*#__PURE__*/_jsx(PlusCircle,{size:18}),/*#__PURE__*/_jsx(\"span\",{children:\"Report New Issue\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"hero-btn-secondary\",onClick:()=>navigate('/dashboard'),children:/*#__PURE__*/_jsx(\"span\",{children:\"View Dashboard\"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"browse-issues-main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"browse-sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-header\",children:[/*#__PURE__*/_jsx(BarChart3,{size:20,className:\"panel-icon\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"Issue Categories\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"panel-subtitle\",children:\"Browse by issue type\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"categories-list\",children:[issueCategories.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"category-item \".concat(filters.category===item.category?'active':''),onClick:()=>handleFilterChange('category',item.category),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"category-icon-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"category-icon\",style:{backgroundColor:item.color},children:item.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"category-title\",children:item.category})]}),/*#__PURE__*/_jsx(\"span\",{className:\"category-count\",style:{backgroundColor:item.color},children:issues.filter(i=>i.category===item.category).length})]},index)),/*#__PURE__*/_jsxs(\"div\",{className:\"category-item \".concat(filters.category==='All Categories'?'active':''),onClick:()=>handleFilterChange('category','All Categories'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"category-icon-title\",children:/*#__PURE__*/_jsx(\"span\",{className:\"category-title\",children:\"All Categories\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"category-count\",children:issues.length})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-header\",children:[/*#__PURE__*/_jsx(Users,{size:20,className:\"panel-icon\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"Community Impact\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"impact-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"impact-stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"impact-icon\",children:\"\\u2705\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"impact-content\",children:[/*#__PURE__*/_jsx(\"strong\",{children:communityImpact.issuesResolved}),/*#__PURE__*/_jsx(\"span\",{children:\"Issues Resolved\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"impact-stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"impact-icon\",children:\"\\u26A1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"impact-content\",children:[/*#__PURE__*/_jsx(\"strong\",{children:communityImpact.responseTime}),/*#__PURE__*/_jsx(\"span\",{children:\"Avg Response Time\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"impact-stat-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"impact-icon\",children:\"\\u2B50\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"impact-content\",children:[/*#__PURE__*/_jsx(\"strong\",{children:communityImpact.communityScore}),/*#__PURE__*/_jsx(\"span\",{children:\"Community Score\"})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"browse-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content-panel filter-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-header-main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-title\",children:[/*#__PURE__*/_jsx(Filter,{size:24,className:\"title-icon\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Filter & Search Issues\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Find and engage with community concerns\"})]})]}),(searchTerm||filters.category!=='All Categories'||filters.status!=='All Statuses')&&/*#__PURE__*/_jsx(\"button\",{onClick:clearFilters,className:\"clear-filters-btn\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Clear All\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"search-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar\",children:[/*#__PURE__*/_jsx(Search,{size:20,className:\"search-icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search issues by title, description, location...\",value:searchTerm,onChange:handleSearchChange,className:\"search-input\"}),searchTerm&&/*#__PURE__*/_jsx(\"button\",{className:\"clear-search-btn\",onClick:()=>setSearchTerm(''),children:\"\\xD7\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"filter-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"filter-label-icon\",children:\"\\uD83D\\uDCC1\"}),\"Category\"]}),/*#__PURE__*/_jsx(\"select\",{value:filters.category,onChange:e=>handleFilterChange('category',e.target.value),className:\"filter-select\",children:categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"filter-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"filter-label-icon\",children:\"\\uD83D\\uDD04\"}),\"Status\"]}),/*#__PURE__*/_jsx(\"select\",{value:filters.status,onChange:e=>handleFilterChange('status',e.target.value),className:\"filter-select\",children:statusOptions.map(status=>/*#__PURE__*/_jsx(\"option\",{value:status,children:status},status))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"filter-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"filter-label\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"filter-label-icon\",children:\"\\uD83D\\uDCCA\"}),\"Sort By\"]}),/*#__PURE__*/_jsx(\"select\",{value:filters.sort,onChange:e=>handleFilterChange('sort',e.target.value),className:\"filter-select\",children:sortOptions.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option,children:option},option))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"results-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"results-count\",children:[/*#__PURE__*/_jsx(\"strong\",{children:filteredIssues.length}),/*#__PURE__*/_jsxs(\"span\",{children:[filteredIssues.length===1?' issue':' issues',\" found\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"community-engagement\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"engagement-badge\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"engagement-dot\"}),\"High Community Engagement\"]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-panel issues-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-header-main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-title\",children:[/*#__PURE__*/_jsx(FileText,{size:24,className:\"title-icon\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Community Issues\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Recent reports from your neighborhood\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"active-filters\",children:[filters.category!=='All Categories'&&/*#__PURE__*/_jsxs(\"span\",{className:\"active-filter-tag\",children:[\"Category: \",filters.category]}),filters.status!=='All Statuses'&&/*#__PURE__*/_jsxs(\"span\",{className:\"active-filter-tag\",children:[\"Status: \",filters.status]}),filters.sort!=='Newest First'&&/*#__PURE__*/_jsxs(\"span\",{className:\"active-filter-tag\",children:[\"Sorted by: \",filters.sort]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"issues-list-container\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading community issues...\"}),/*#__PURE__*/_jsx(\"span\",{className:\"loading-subtitle\",children:\"Fetching the latest reports from the server\"})]}):filteredIssues.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-icon\",children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"No issues found\"}),/*#__PURE__*/_jsx(\"p\",{children:\"We couldn't find any issues matching your search criteria.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:clearFilters,className:\"clear-filters-btn large\",children:\"Clear All Filters\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"issues-grid\",children:filteredIssues.map(issue=>{var _issueCategories$find,_issueCategories$find2,_issue$counts,_issue$counts2;return/*#__PURE__*/_jsxs(\"div\",{className:\"issue-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"issue-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"issue-meta-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"issue-category-tag\",style:{backgroundColor:((_issueCategories$find=issueCategories.find(c=>c.category===issue.category))===null||_issueCategories$find===void 0?void 0:_issueCategories$find.color)+'20',color:(_issueCategories$find2=issueCategories.find(c=>c.category===issue.category))===null||_issueCategories$find2===void 0?void 0:_issueCategories$find2.color},children:issue.category}),/*#__PURE__*/_jsxs(\"div\",{className:\"priority-indicator priority-\".concat(issue.priority),children:[/*#__PURE__*/_jsx(\"div\",{className:\"priority-dot priority-\".concat(issue.priority)}),issue.priority,\" priority\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"issue-urgency\",children:issue.urgency})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"issue-title\",children:issue.title}),/*#__PURE__*/_jsx(\"p\",{className:\"issue-description\",children:issue.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"issue-meta\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"meta-item\",children:[/*#__PURE__*/_jsx(MapPin,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:issue.location})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"meta-item\",children:[/*#__PURE__*/_jsx(Clock,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:getRelativeTime(issue.createdAt)})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"issue-footer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar-small\",children:issue.userAvatar}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-details\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"user-name\",children:issue.user}),/*#__PURE__*/_jsx(\"span\",{className:\"report-time\",children:getRelativeTime(issue.createdAt)})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"issue-actions\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"vote-section\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"vote-btn upvote \".concat(userVotes[issue.id]==='upvote'?'voted':''),onClick:()=>handleVote(issue.id,'upvote'),children:[/*#__PURE__*/_jsx(Heart,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:((_issue$counts=issue.counts)===null||_issue$counts===void 0?void 0:_issue$counts.upvote)||0})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"vote-btn downvote \".concat(userVotes[issue.id]==='downvote'?'voted':''),onClick:()=>handleVote(issue.id,'downvote'),children:[/*#__PURE__*/_jsx(ThumbsDown,{size:16}),/*#__PURE__*/_jsx(\"span\",{children:((_issue$counts2=issue.counts)===null||_issue$counts2===void 0?void 0:_issue$counts2.downVote)||0})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"status-badge status-\".concat(issue.status.replace(' ','').toLowerCase()),children:issue.status})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comments-toggle\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"comments-open-btn\",onClick:()=>toggleComments(issue.id),children:[/*#__PURE__*/_jsx(ChevronsDown,{size:14}),\" \",commentsOpen[issue.id]?'Hide':'Show',\" Comments (\",issue.comments||0,\")\"]})}),commentsOpen[issue.id]&&/*#__PURE__*/_jsxs(\"div\",{className:\"comments-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"add-comment\",children:[/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Write your comment...\",value:commentDrafts[issue.id]||'',onChange:e=>handleCommentChange(issue.id,e.target.value),rows:2}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-actions\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>postComment(issue.id),disabled:busyComments[issue.id],children:busyComments[issue.id]?'Posting...':'Post Comment'})})]}),(commentsStore[issue.id]||[]).map(c=>{var _c$userId,_c$userId2;const commenterName=((_c$userId=c.userId)===null||_c$userId===void 0?void 0:_c$userId.name)||'User';const isOwner=(((_c$userId2=c.userId)===null||_c$userId2===void 0?void 0:_c$userId2._id)||c.userId)===user._id;const isEditing=(editingComment===null||editingComment===void 0?void 0:editingComment.commentId)===c._id;return/*#__PURE__*/_jsxs(\"div\",{className:\"comment-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comment-avatar\",children:commenterName[0].toUpperCase()}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-body\",children:isEditing?/*#__PURE__*/_jsxs(\"div\",{className:\"edit-comment-area\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:editingComment.content,onChange:e=>setEditingComment(prev=>_objectSpread(_objectSpread({},prev),{},{content:e.target.value})),rows:3}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>updateComment(issue.id,c._id,editingComment.content),disabled:busyComments[c._id],children:[/*#__PURE__*/_jsx(Save,{size:14}),\" \",busyComments[c._id]?'Saving...':'Save']}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel-edit-btn\",onClick:()=>setEditingComment(null),children:\"Cancel\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-meta\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"comment-author\",children:commenterName}),/*#__PURE__*/_jsxs(\"span\",{className:\"comment-time\",children:[getRelativeTime(c.createdAt),c.updatedAt&&c.updatedAt.toString()!==c.createdAt.toString()&&new Date(c.updatedAt)>new Date(c.createdAt)?' (edited)':'']}),isOwner&&/*#__PURE__*/_jsxs(\"div\",{className:\"comment-owner-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"edit-comment-btn\",onClick:()=>startEditComment(c),children:/*#__PURE__*/_jsx(Edit,{size:14})}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-comment-btn\",onClick:()=>deleteComment(issue.id,c._id),children:\"\\uD83D\\uDDD1\\uFE0F\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-content\",children:c.content})]})})]},c._id);})]})]},issue.id);})})})]})]})]})]}),/*#__PURE__*/_jsxs(\"footer\",{className:\"footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"footer-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"footer-section\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"footer-tagline\",children:\"Civic Engagement Platform\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Empowering communities to report, track, and resolve civic issues through collaborative engagement between citizens and local authorities.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Platform\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"footer-link-btn\",children:\"How it Works\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"footer-link-btn\",children:\"Features\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"footer-link-btn\",children:\"Mobile App\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"footer-link-btn\",children:\"Success Stories\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Support\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"footer-link-btn\",children:\"Help Center\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"footer-link-btn\",children:\"Contact Us\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"footer-link-btn\",children:\"Community Guidelines\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"footer-link-btn\",children:\"FAQ\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Community\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"footer-link-btn\",children:\"About Us\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"footer-link-btn\",children:\"Blog\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"footer-link-btn\",children:\"Events\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"footer-link-btn\",children:\"Partners\"})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-bottom\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\xA9 2025 CivicEye. All rights reserved. Making neighborhoods better, one issue at a time.\"})})]})]});};export default UserBrowseIssue;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","Link","useNavigate","axios","useAuth","Search","Filter","MapPin","ArrowRight","BarChart3","Users","FileText","PlusCircle","Heart","MessageSquare","Eye","Clock","ChevronsDown","ThumbsDown","Edit","Save","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_BASE_URL","getRelativeTime","isoDateString","reportDate","Date","today","startOfToday","getFullYear","getMonth","getDate","startOfReportDay","diffTime","getTime","diffDays","Math","floor","hoursDiff","concat","getUserInitials","name","nameParts","split","initials","map","part","join","toUpperCase","UserBrowseIssue","user","signOut","navigate","authChecked","setAuthChecked","issues","setIssues","filteredIssues","setFilteredIssues","loading","setLoading","searchTerm","setSearchTerm","filters","setFilters","category","status","sort","userVotes","setUserVotes","commentsOpen","setCommentsOpen","commentsStore","setCommentsStore","commentDrafts","setCommentDrafts","busyComments","setBusyComments","editingComment","setEditingComment","categories","statusOptions","sortOptions","issueCategories","count","icon","color","communityImpact","issuesResolved","responseTime","communityScore","activeUsers","totalReports","fetchIssues","params","search","trim","response","get","withCredentials","fetchedIssues","data","comp","_comp$address","_comp$userId","_comp$comments","statusText","locationText","address","userName","userId","reverseCategoryMap","displayCategory","assignedTo","id","_id","title","description","location","createdAt","votes","comments","length","views","random","priority","urgency","userAvatar","counts","upvote","downVote","ids","i","userVotesResp","err","_err$response","console","warn","message","countsPromises","then","r","catch","countsResults","Promise","all","countsMap","reduce","acc","item","issuesWithCounts","_objectSpread","error","_error$response","checkAuthStatus","resolve","setTimeout","handleVote","issueId","voteType","alert","currentUserVote","endpoint","updatedIssuesOptimistic","issue","prevUserVote","max","newUserVote","undefined","_newUserVote","newUserVoteState","hasOwnProperty","resp","post","returned","returnedCounts","prev","_error$response2","_error$response3","_error$response3$data","fetchComments","complaintId","_err$response2","toggleComments","isOpen","handleCommentChange","value","deleteComment","commentId","window","confirm","prevComments","filter","c","delete","_err$response3","startEditComment","comment","content","updateComment","newContent","trimmedContent","currentComment","find","prevContent","prevUpdatedAt","updatedAt","toISOString","put","updated","_err$response4","postComment","text","tempComment","now","created","_err$response5","handleFilterChange","filterType","handleSearchChange","e","target","handleLogout","finally","clearFilters","className","children","to","onClick","size","index","style","backgroundColor","type","placeholder","onChange","option","_issueCategories$find","_issueCategories$find2","_issue$counts","_issue$counts2","replace","toLowerCase","rows","disabled","_c$userId","_c$userId2","commenterName","isOwner","isEditing","toString"],"sources":["C:/Users/saksh/OneDrive/Desktop/DS/civiceye/civiceye/frontend/src/pages/VolunteerBrowserIssues.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { Search, Filter, MapPin, ArrowRight, BarChart3, Users, FileText, PlusCircle, Heart, MessageSquare, Eye, Clock, ChevronsDown, ThumbsDown, Edit, Save } from 'lucide-react'; \r\nimport './IssuesBrowser.css';\r\n\r\nconst API_BASE_URL = 'http://localhost:3000/api/v1'; // Define API URL\r\n\r\n// --- Time utility ---\r\nconst getRelativeTime = (isoDateString) => {\r\n    const reportDate = new Date(isoDateString);\r\n    const today = new Date();\r\n    const startOfToday = new Date(today.getFullYear(), today.getMonth(), today.getDate());\r\n    const startOfReportDay = new Date(reportDate.getFullYear(), reportDate.getMonth(), reportDate.getDate());\r\n    const diffTime = startOfToday.getTime() - startOfReportDay.getTime();\r\n    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\r\n\r\n    if (diffDays === 0) {\r\n        const hoursDiff = Math.floor((today.getTime() - reportDate.getTime()) / (1000 * 60 * 60));\r\n        if (hoursDiff === 0) return 'Just now';\r\n        if (hoursDiff < 24) return `${hoursDiff} hours ago`;\r\n        return 'Today';\r\n    }\r\n    if (diffDays === 1) return 'Yesterday';\r\n    if (diffDays < 7) return `${diffDays} days ago`;\r\n    if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;\r\n    return `${Math.floor(diffDays / 30)} months ago`;\r\n};\r\n\r\nconst getUserInitials = (name) => {\r\n    if (!name) return 'JD';\r\n    const nameParts = name.split(' ');\r\n    const initials = nameParts.map(part => part[0]).join('');\r\n    return initials.toUpperCase();\r\n};\r\n\r\nconst UserBrowseIssue = () => {\r\n    const { user, signOut } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    const [authChecked, setAuthChecked] = useState(false);\r\n    const [issues, setIssues] = useState([]);\r\n    const [filteredIssues, setFilteredIssues] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [filters, setFilters] = useState({\r\n        category: 'All Categories',\r\n        status: 'All Statuses',\r\n        sort: 'Newest First'\r\n    });\r\n    const [userVotes, setUserVotes] = useState({});\r\n    const [commentsOpen, setCommentsOpen] = useState({});\r\n    const [commentsStore, setCommentsStore] = useState({});\r\n    const [commentDrafts, setCommentDrafts] = useState({});\r\n    const [busyComments, setBusyComments] = useState({});\r\n\r\n    // Consistent state name\r\n    const [editingComment, setEditingComment] = useState(null); \r\n\r\n    const categories = useMemo(() => [\r\n        'All Categories', 'Garbage & Waste', 'Potholes', 'Water Issues', 'Street Lights', 'Vandalism', 'Other'\r\n    ], []);\r\n\r\n    const statusOptions = useMemo(() => [\r\n        'All Statuses', 'Pending', 'In Progress', 'Resolved'\r\n    ], []);\r\n\r\n    const sortOptions = useMemo(() => [\r\n        'Newest First', 'Oldest First', 'Most Voted', 'Most Viewed', 'Priority'\r\n    ], []);\r\n\r\n    const issueCategories = useMemo(() => [\r\n        { category: 'Garbage & Waste', count: 0, icon: 'ðŸ—‘ï¸', color: '#E53E3E' },\r\n        { category: 'Potholes', count: 0, icon: 'ðŸ•³ï¸', color: '#DD6B20' },\r\n        { category: 'Water Issues', count: 0, icon: 'ðŸ’§', color: '#3182CE' },\r\n        { category: 'Street Lights', count: 0, icon: 'ðŸ’¡', color: '#D69E2E' },\r\n        { category: 'Vandalism', count: 0, icon: 'ðŸŽ¨', color: '#805AD5' },\r\n        { category: 'Other', count: 0, icon: 'ðŸ“‹', color: '#718096' },\r\n    ], []);\r\n\r\n    const communityImpact = {\r\n        issuesResolved: '89+',\r\n        responseTime: '2.3 days avg',\r\n        communityScore: '95%',\r\n        activeUsers: '1.2k',\r\n        totalReports: '2.8k'\r\n    };\r\n\r\n    const fetchIssues = useCallback(async () => {\r\n        if (!user) return;\r\n        setLoading(true);\r\n\r\n        const params = {\r\n            search: searchTerm.trim(),\r\n            category: filters.category,\r\n            status: filters.status,\r\n            sort: filters.sort,\r\n        };\r\n\r\n        try {\r\n            const response = await axios.get(`${API_BASE_URL}/complaints/all`, {\r\n                params: params,\r\n                withCredentials: true\r\n            });\r\n\r\n            const fetchedIssues = response.data.data.map(comp => {\r\n                const statusText = comp.status === 'recived' ? 'Pending' : comp.status === 'inReview' ? 'In Progress' : comp.status === 'resolved' ? 'Resolved' : 'Pending';\r\n                const locationText = comp.address?.[0] || 'Unknown Location';\r\n                \r\n                const userName = typeof comp.userId === 'object' && comp.userId?.name\r\n                    ? comp.userId.name\r\n                    : 'Anonymous User';\r\n\r\n                const reverseCategoryMap = {\r\n                    'Municipal sanitation and public health': 'Garbage & Waste',\r\n                    'Roads and street infrastructure': 'Potholes',\r\n                    'Street lighting and electrical assets': 'Street Lights',\r\n                    'Water, sewerage, and stormwater': 'Water Issues',\r\n                    'Ward/zone office and central admin': 'Vandalism'\r\n                };\r\n                const displayCategory = reverseCategoryMap[comp.assignedTo] || 'Other';\r\n\r\n                return {\r\n                    id: comp._id,\r\n                    title: comp.title,\r\n                    description: comp.description,\r\n                    location: locationText,\r\n                    category: displayCategory,\r\n                    status: statusText,\r\n                    createdAt: comp.createdAt,\r\n                    votes: 0, \r\n                    comments: comp.comments?.length || 0,\r\n                    views: Math.floor(Math.random() * 200),\r\n                    priority: ['high', 'medium', 'low'][Math.floor(Math.random() * 3)],\r\n                    urgency: 'Community Concern',\r\n                    user: userName,\r\n                    userAvatar: getUserInitials(userName),\r\n                    counts: { upvote: 0, downVote: 0 } \r\n                };\r\n            });\r\n\r\n            setIssues(fetchedIssues);\r\n            setFilteredIssues(fetchedIssues);\r\n\r\n            const ids = fetchedIssues.map(i => i.id).join(',');\r\n            if (ids.length > 0) {\r\n                try {\r\n                    const userVotesResp = await axios.get(`${API_BASE_URL}/votes/user-votes`, {\r\n                        params: { issues: ids },\r\n                        withCredentials: true\r\n                    });\r\n                    setUserVotes(userVotesResp.data.data || {});\r\n                } catch (err) {\r\n                    console.warn(\"Failed to fetch user votes:\", err.response?.data || err.message);\r\n                }\r\n            }\r\n\r\n            const countsPromises = fetchedIssues.map(i =>\r\n                axios.get(`${API_BASE_URL}/votes/${i.id}`, { withCredentials: true })\r\n                    .then(r => ({ id: i.id, counts: r.data.data }))\r\n                    .catch(() => ({ id: i.id, counts: { upvote: 0, downVote: 0 } }))\r\n            );\r\n\r\n            const countsResults = await Promise.all(countsPromises);\r\n            const countsMap = countsResults.reduce((acc, item) => { acc[item.id] = item.counts; return acc; }, {});\r\n            const issuesWithCounts = fetchedIssues.map(i => ({ ...i, counts: countsMap[i.id] || { upvote: 0, downVote: 0 } }));\r\n            setIssues(issuesWithCounts);\r\n            setFilteredIssues(issuesWithCounts);\r\n\r\n        } catch (error) {\r\n            console.error(\"Failed to fetch issues:\", error.response?.data || error.message);\r\n            setIssues([]);\r\n            setFilteredIssues([]);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [user, searchTerm, filters]);\r\n\r\n    useEffect(() => {\r\n        const checkAuthStatus = async () => {\r\n            await new Promise(resolve => setTimeout(resolve, 50));\r\n            setAuthChecked(true);\r\n        };\r\n        checkAuthStatus();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!authChecked) return;\r\n        if (!user) {\r\n            navigate('/login');\r\n        } else {\r\n            fetchIssues();\r\n        }\r\n    }, [user, navigate, fetchIssues, authChecked]);\r\n\r\n    // --- VOTE Handler (Upvote & Downvote) ---\r\n    const handleVote = async (issueId, voteType) => {\r\n        if (!user) {\r\n            alert(\"Please login to vote.\");\r\n            return;\r\n        }\r\n\r\n        const currentUserVote = userVotes[issueId]; \r\n        let endpoint = `${API_BASE_URL}/votes/${issueId}?category=${voteType}`;\r\n        \r\n        // Optimistic Update: Calculate new counts and new user vote state immediately\r\n        const updatedIssuesOptimistic = issues.map(issue => {\r\n            if (issue.id !== issueId) return issue;\r\n            const counts = { ...issue.counts };\r\n            const prevUserVote = currentUserVote;\r\n\r\n            // 1. Remove previous vote\r\n            if (prevUserVote === 'upvote') counts.upvote = Math.max(0, counts.upvote - 1);\r\n            if (prevUserVote === 'downvote') counts.downVote = Math.max(0, counts.downVote - 1);\r\n\r\n            let newUserVote;\r\n            if (prevUserVote === voteType) {\r\n                newUserVote = undefined; // toggled off\r\n            } else {\r\n                // 2. Add new vote\r\n                if (voteType === 'upvote') counts.upvote = (counts.upvote || 0) + 1;\r\n                else counts.downVote = (counts.downVote || 0) + 1;\r\n                newUserVote = voteType;\r\n            }\r\n\r\n            return { ...issue, counts, _newUserVote: newUserVote }; \r\n        });\r\n\r\n        // Apply the new user vote state permanently\r\n        const newUserVoteState = updatedIssuesOptimistic.reduce((acc, issue) => {\r\n            if (issue.id === issueId) {\r\n                acc[issue.id] = issue._newUserVote;\r\n            } else if (userVotes.hasOwnProperty(issue.id)) {\r\n                acc[issue.id] = userVotes[issue.id];\r\n            }\r\n            delete issue._newUserVote;\r\n            return acc;\r\n        }, {});\r\n\r\n        setUserVotes(newUserVoteState);\r\n        setIssues(updatedIssuesOptimistic);\r\n        setFilteredIssues(updatedIssuesOptimistic);\r\n\r\n        try {\r\n            const resp = await axios.post(endpoint, {}, { withCredentials: true });\r\n            \r\n            const returned = resp.data.data;\r\n            const returnedCounts = returned?.counts || resp.data.data; \r\n\r\n            if (returnedCounts) {\r\n                setIssues(prev => prev.map(i => i.id === issueId ? { ...i, counts: returnedCounts } : i));\r\n                setFilteredIssues(prev => prev.map(i => i.id === issueId ? { ...i, counts: returnedCounts } : i));\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error(\"Vote action failed:\", error.response?.data || error.message);\r\n            fetchIssues(); \r\n            alert(`Vote action failed: ${error.response?.data?.message || 'Check network/server logic.'}`);\r\n        }\r\n    };\r\n\r\n\r\n    // --- Comments: fetch for a single complaint ---\r\n    const fetchComments = async (complaintId) => {\r\n        setCommentsOpen(prev => ({ ...prev, [complaintId]: true }));\r\n        if (commentsStore[complaintId]) return; \r\n\r\n        try {\r\n            const resp = await axios.get(`${API_BASE_URL}/comments/${complaintId}`, { withCredentials: true });\r\n            setCommentsStore(prev => ({ ...prev, [complaintId]: resp.data.data }));\r\n        } catch (err) {\r\n            console.error(\"Failed to fetch comments\", err.response?.data || err.message);\r\n            setCommentsStore(prev => ({ ...prev, [complaintId]: [] }));\r\n        }\r\n    };\r\n\r\n    const toggleComments = (complaintId) => {\r\n        const isOpen = !!commentsOpen[complaintId];\r\n        if (!isOpen) {\r\n            fetchComments(complaintId);\r\n        } else {\r\n            setCommentsOpen(prev => ({ ...prev, [complaintId]: false }));\r\n        }\r\n    };\r\n\r\n    const handleCommentChange = (issueId, value) => {\r\n        setCommentDrafts(prev => ({ ...prev, [issueId]: value }));\r\n    };\r\n\r\n    const deleteComment = async (issueId, commentId) => {\r\n        if (!window.confirm(\"Are you sure you want to delete this comment?\")) return;\r\n\r\n        const prevComments = commentsStore[issueId] || [];\r\n\r\n        // Optimistic removal\r\n        setCommentsStore(prev => ({\r\n            ...prev,\r\n            [issueId]: prev[issueId].filter(c => c._id !== commentId)\r\n        }));\r\n\r\n        try {\r\n            await axios.delete(`${API_BASE_URL}/comments/${issueId}/${commentId}`, { withCredentials: true });\r\n\r\n            // decrement comment count\r\n            setIssues(prev => prev.map(i => i.id === issueId ? { ...i, comments: (i.comments || 1) - 1 } : i));\r\n            setFilteredIssues(prev => prev.map(i => i.id === issueId ? { ...i, comments: (i.comments || 1) - 1 } : i));\r\n        } catch (err) {\r\n            console.error(\"Failed to delete comment:\", err.response?.data || err.message);\r\n            alert(\"Failed to delete comment\");\r\n            // rollback\r\n            setCommentsStore(prev => ({ ...prev, [issueId]: prevComments }));\r\n        }\r\n    };\r\n\r\n    // --- Start Editing Comment ---\r\n    const startEditComment = (comment) => {\r\n        setEditingComment({\r\n            commentId: comment._id,\r\n            content: comment.content\r\n        });\r\n    };\r\n\r\n    // --- Update Comment Handler ---\r\n    const updateComment = async (issueId, commentId, newContent) => {\r\n        const trimmedContent = newContent.trim();\r\n        if (!trimmedContent || trimmedContent === (editingComment?.content || '')) {\r\n            setEditingComment(null); \r\n            return;\r\n        }\r\n\r\n        setBusyComments(prev => ({ ...prev, [commentId]: true }));\r\n        const currentComment = commentsStore[issueId].find(c => c._id === commentId);\r\n        const prevContent = currentComment?.content;\r\n        const prevUpdatedAt = currentComment?.updatedAt; \r\n\r\n        // 1. Optimistic update\r\n        setCommentsStore(prev => ({\r\n            ...prev,\r\n            [issueId]: prev[issueId].map(c => \r\n                c._id === commentId \r\n                    ? { \r\n                        ...c, \r\n                        content: trimmedContent, \r\n                        updatedAt: new Date().toISOString(), \r\n                        userId: currentComment.userId \r\n                    } \r\n                    : c\r\n            )\r\n        }));\r\n        setEditingComment(null); \r\n\r\n        try {\r\n            // 2. API call to update the comment\r\n            const resp = await axios.put(`${API_BASE_URL}/comments/${issueId}/${commentId}`, { content: trimmedContent }, { withCredentials: true });\r\n            const updated = resp.data.data; \r\n\r\n            // 3. Final update from server response \r\n            setCommentsStore(prev => ({\r\n                ...prev,\r\n                [issueId]: prev[issueId].map(c => c._id === commentId ? updated : c)\r\n            }));\r\n        } catch (err) {\r\n            console.error(\"Failed to update comment\", err.response?.data || err.message);\r\n            alert(\"Failed to update comment. Rolling back.\");\r\n            \r\n            // 4. Rollback on error\r\n            setCommentsStore(prev => ({\r\n                ...prev,\r\n                [issueId]: prev[issueId].map(c => \r\n                    c._id === commentId ? { ...c, content: prevContent, updatedAt: prevUpdatedAt } : c\r\n                )\r\n            }));\r\n            \r\n            // 5. Re-open edit state with old content for user to retry\r\n            setEditingComment({ commentId, content: prevContent });\r\n        } finally {\r\n            setBusyComments(prev => ({ ...prev, [commentId]: false }));\r\n        }\r\n    };\r\n\r\n    const postComment = useCallback(async (issueId) => {\r\n        const text = (commentDrafts[issueId] || '').trim();\r\n        if (!text) return alert(\"Comment can't be empty\");\r\n        setBusyComments(prev => ({ ...prev, [issueId]: true }));\r\n\r\n        // --- Include current user details for optimistic comment and correct display ---\r\n        const tempComment = {\r\n            _id: `temp-${Date.now()}`,\r\n            userId: { _id: user._id, name: user.name }, \r\n            complaintId: issueId,\r\n            content: text,\r\n            createdAt: new Date().toISOString(),\r\n            updatedAt: new Date().toISOString()\r\n        };\r\n        // -------------------------------------------------------------------------------------\r\n\r\n        setCommentsStore(prev => ({ \r\n            ...prev, \r\n            [issueId]: [tempComment, ...(prev[issueId] || [])] \r\n        }));\r\n        setCommentDrafts(prev => ({ ...prev, [issueId]: \"\" }));\r\n\r\n        try {\r\n            const resp = await axios.post(`${API_BASE_URL}/comments/${issueId}`, { content: text }, { withCredentials: true });\r\n            const created = resp.data.data;\r\n\r\n            // Replace temp comment with actual\r\n            setCommentsStore(prev => ({\r\n                ...prev,\r\n                [issueId]: prev[issueId].map(c => c._id === tempComment._id ? created : c)\r\n            }));\r\n\r\n            // increment comment count on issue\r\n            setIssues(prev => prev.map(i => i.id === issueId ? { ...i, comments: (i.comments || 0) + 1 } : i));\r\n            setFilteredIssues(prev => prev.map(i => i.id === issueId ? { ...i, comments: (i.comments || 0) + 1 } : i));\r\n        } catch (err) {\r\n            console.error(\"Failed to post comment\", err.response?.data || err.message);\r\n            // rollback optimistic append\r\n            setCommentsStore(prev => ({ ...prev, [issueId]: (prev[issueId] || []).filter(c => c._id !== tempComment._id) }));\r\n            alert(\"Failed to post comment\");\r\n        } finally {\r\n            setBusyComments(prev => ({ ...prev, [issueId]: false }));\r\n        }\r\n    }, [commentDrafts, user]); \r\n\r\n    // --- Other Handlers ---\r\n    const handleFilterChange = (filterType, value) => {\r\n        setFilters(prev => ({\r\n            ...prev,\r\n            [filterType]: value\r\n        }));\r\n    };\r\n\r\n    const handleSearchChange = (e) => {\r\n        setSearchTerm(e.target.value);\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        axios.post(`${API_BASE_URL}/users/logout`, {}, { withCredentials: true })\r\n            .catch(() => { })\r\n            .finally(() => {\r\n                signOut();\r\n                navigate('/');\r\n            });\r\n    };\r\n\r\n    const clearFilters = () => {\r\n        setSearchTerm('');\r\n        setFilters({\r\n            category: 'All Categories',\r\n            status: 'All Statuses',\r\n            sort: 'Newest First'\r\n        });\r\n    };\r\n\r\n    if (!authChecked) {\r\n        return (\r\n            <div className=\"loading-state full-page-loading\">\r\n                <div className=\"loading-spinner\"></div>\r\n                <p>Checking authentication status...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!user) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {/* Header */}\r\n            <header className=\"header-top\">\r\n                \r\n                <nav className=\"nav-links\">\r\n                    <Link to=\"/volunteer-dashboard\" >Dashboard</Link>\r\n                    <Link to=\"/MyAssignedIssues\">My Assigned Issues</Link>\r\n                    <Link to=\"/volunteer-browser-issues\" className=\"active\">Browse Issues</Link>\r\n                </nav>\r\n                <div className=\"user-profile\">\r\n                    <Link to=\"/profile\" className=\"profile-link\">\r\n                        <div className=\"user-initials\">{getUserInitials(user.name)}</div>\r\n                        <span className=\"user-name\">{user.name}</span>\r\n                    </Link>\r\n                    <button onClick={handleLogout} className=\"logout-btn-header\">\r\n                        <ArrowRight size={20} />\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            <div className=\"dashboard-container\">\r\n                {/* Hero */}\r\n                <div className=\"dashboard-hero\">\r\n                    <div className=\"hero-background\"></div>\r\n                    <div className=\"hero-content-wrapper\">\r\n                        <div className=\"hero-badge\">Community Platform</div>\r\n                        <h1>Discover & Support Local Issues</h1>\r\n                        <p>Join thousands of community members in identifying, voting, and resolving neighborhood concerns. Together we build better communities.</p>\r\n                        <div className=\"hero-stats\">\r\n                            <div className=\"hero-stat\">\r\n                                <strong>{communityImpact.totalReports}</strong>\r\n                                <span>Issues Reported</span>\r\n                            </div>\r\n                            <div className=\"hero-stat\">\r\n                                <strong>{communityImpact.issuesResolved}</strong>\r\n                                <span>Issues Resolved</span>\r\n                            </div>\r\n                            <div className=\"hero-stat\">\r\n                                <strong>{communityImpact.activeUsers}</strong>\r\n                                <span>Active Members</span>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"hero-buttons\">\r\n                            <button className=\"hero-btn-primary\" onClick={() => navigate('/report-issue')}>\r\n                                <PlusCircle size={18} />\r\n                                <span>Report New Issue</span>\r\n                            </button>\r\n                            <button className=\"hero-btn-secondary\" onClick={() => navigate('/dashboard')}>\r\n                                <span>View Dashboard</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"browse-issues-main\">\r\n                    <div className=\"browse-sidebar\">\r\n                        {/* Sidebar content */}\r\n                        <div className=\"sidebar-panel\">\r\n                            <div className=\"panel-header\">\r\n                                <BarChart3 size={20} className=\"panel-icon\" />\r\n                                <h4>Issue Categories</h4>\r\n                            </div>\r\n                            <p className=\"panel-subtitle\">Browse by issue type</p>\r\n                            <div className=\"categories-list\">\r\n                                {issueCategories.map((item, index) => (\r\n                                    <div\r\n                                        key={index}\r\n                                        className={`category-item ${filters.category === item.category ? 'active' : ''}`}\r\n                                        onClick={() => handleFilterChange('category', item.category)}\r\n                                    >\r\n                                        <div className=\"category-icon-title\">\r\n                                            <span\r\n                                                className=\"category-icon\"\r\n                                                style={{ backgroundColor: item.color }}\r\n                                            >\r\n                                                {item.icon}\r\n                                            </span>\r\n                                            <span className=\"category-title\">{item.category}</span>\r\n                                        </div>\r\n                                        <span\r\n                                            className=\"category-count\"\r\n                                            style={{ backgroundColor: item.color }}\r\n                                        >\r\n                                            {issues.filter(i => i.category === item.category).length}\r\n                                        </span>\r\n                                    </div>\r\n                                ))}\r\n                                <div\r\n                                    className={`category-item ${filters.category === 'All Categories' ? 'active' : ''}`}\r\n                                    onClick={() => handleFilterChange('category', 'All Categories')}\r\n                                >\r\n                                    <div className=\"category-icon-title\">\r\n                                        <span className=\"category-title\">All Categories</span>\r\n                                    </div>\r\n                                    <span className=\"category-count\">{issues.length}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"sidebar-panel\">\r\n                            <div className=\"panel-header\">\r\n                                <Users size={20} className=\"panel-icon\" />\r\n                                <h4>Community Impact</h4>\r\n                            </div>\r\n                            <div className=\"impact-stats\">\r\n                                <div className=\"impact-stat-item\">\r\n                                    <div className=\"impact-icon\">âœ…</div>\r\n                                    <div className=\"impact-content\">\r\n                                        <strong>{communityImpact.issuesResolved}</strong>\r\n                                        <span>Issues Resolved</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"impact-stat-item\">\r\n                                    <div className=\"impact-icon\">âš¡</div>\r\n                                    <div className=\"impact-content\">\r\n                                        <strong>{communityImpact.responseTime}</strong>\r\n                                        <span>Avg Response Time</span>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"impact-stat-item\">\r\n                                    <div className=\"impact-icon\">â­</div>\r\n                                    <div className=\"impact-content\">\r\n                                        <strong>{communityImpact.communityScore}</strong>\r\n                                        <span>Community Score</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"browse-content\">\r\n                        <div className=\"content-panel filter-panel\">\r\n                            <div className=\"panel-header-main\">\r\n                                <div className=\"panel-title\">\r\n                                    <Filter size={24} className=\"title-icon\" />\r\n                                    <div>\r\n                                        <h3>Filter & Search Issues</h3>\r\n                                        <p>Find and engage with community concerns</p>\r\n                                    </div>\r\n                                </div>\r\n                                {(searchTerm || filters.category !== 'All Categories' || filters.status !== 'All Statuses') && (\r\n                                    <button onClick={clearFilters} className=\"clear-filters-btn\">\r\n                                        <span>Clear All</span>\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n\r\n                            <div className=\"search-section\">\r\n                                <div className=\"search-bar\">\r\n                                    <Search size={20} className=\"search-icon\" />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"Search issues by title, description, location...\"\r\n                                        value={searchTerm}\r\n                                        onChange={handleSearchChange}\r\n                                        className=\"search-input\"\r\n                                    />\r\n                                    {searchTerm && (\r\n                                        <button\r\n                                            className=\"clear-search-btn\"\r\n                                            onClick={() => setSearchTerm('')}\r\n                                        >\r\n                                            Ã—\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"filter-controls\">\r\n                                <div className=\"filter-group\">\r\n                                    <label className=\"filter-label\">\r\n                                        <span className=\"filter-label-icon\">ðŸ“</span>\r\n                                        Category\r\n                                    </label>\r\n                                    <select\r\n                                        value={filters.category}\r\n                                        onChange={(e) => handleFilterChange('category', e.target.value)}\r\n                                        className=\"filter-select\"\r\n                                    >\r\n                                        {categories.map(category => (\r\n                                            <option key={category} value={category}>\r\n                                                {category}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <div className=\"filter-group\">\r\n                                    <label className=\"filter-label\">\r\n                                        <span className=\"filter-label-icon\">ðŸ”„</span>\r\n                                        Status\r\n                                    </label>\r\n                                    <select\r\n                                        value={filters.status}\r\n                                        onChange={(e) => handleFilterChange('status', e.target.value)}\r\n                                        className=\"filter-select\"\r\n                                    >\r\n                                        {statusOptions.map(status => (\r\n                                            <option key={status} value={status}>\r\n                                                {status}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <div className=\"filter-group\">\r\n                                    <label className=\"filter-label\">\r\n                                        <span className=\"filter-label-icon\">ðŸ“Š</span>\r\n                                        Sort By\r\n                                    </label>\r\n                                    <select\r\n                                        value={filters.sort}\r\n                                        onChange={(e) => handleFilterChange('sort', e.target.value)}\r\n                                        className=\"filter-select\"\r\n                                    >\r\n                                        {sortOptions.map(option => (\r\n                                            <option key={option} value={option}>\r\n                                                {option}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"results-info\">\r\n                                <div className=\"results-count\">\r\n                                    <strong>{filteredIssues.length}</strong>\r\n                                    <span>{filteredIssues.length === 1 ? ' issue' : ' issues'} found</span>\r\n                                </div>\r\n                                <div className=\"community-engagement\">\r\n                                    <div className=\"engagement-badge\">\r\n                                        <span className=\"engagement-dot\"></span>\r\n                                        High Community Engagement\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Issues List */}\r\n                        <div className=\"content-panel issues-panel\">\r\n                            <div className=\"panel-header-main\">\r\n                                <div className=\"panel-title\">\r\n                                    <FileText size={24} className=\"title-icon\" />\r\n                                    <div>\r\n                                        <h3>Community Issues</h3>\r\n                                        <p>Recent reports from your neighborhood</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"active-filters\">\r\n                                    {filters.category !== 'All Categories' && (\r\n                                        <span className=\"active-filter-tag\">Category: {filters.category}</span>\r\n                                    )}\r\n                                    {filters.status !== 'All Statuses' && (\r\n                                        <span className=\"active-filter-tag\">Status: {filters.status}</span>\r\n                                    )}\r\n                                    {filters.sort !== 'Newest First' && (\r\n                                        <span className=\"active-filter-tag\">Sorted by: {filters.sort}</span>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"issues-list-container\">\r\n                                {loading ? (\r\n                                    <div className=\"loading-state\">\r\n                                        <div className=\"loading-spinner\"></div>\r\n                                        <p>Loading community issues...</p>\r\n                                        <span className=\"loading-subtitle\">Fetching the latest reports from the server</span>\r\n                                    </div>\r\n                                ) : filteredIssues.length === 0 ? (\r\n                                    <div className=\"empty-state\">\r\n                                        <div className=\"empty-icon\">ðŸ”</div>\r\n                                        <h3>No issues found</h3>\r\n                                        <p>We couldn't find any issues matching your search criteria.</p>\r\n                                        <button onClick={clearFilters} className=\"clear-filters-btn large\">\r\n                                            Clear All Filters\r\n                                        </button>\r\n                                    </div>\r\n                                ) : (\r\n                                    <div className=\"issues-grid\">\r\n                                        {filteredIssues.map(issue => (\r\n                                            <div key={issue.id} className=\"issue-card\">\r\n                                                <div className=\"issue-header\">\r\n                                                    <div className=\"issue-meta-left\">\r\n                                                        <div\r\n                                                            className=\"issue-category-tag\"\r\n                                                            style={{\r\n                                                                backgroundColor: issueCategories.find(c => c.category === issue.category)?.color + '20',\r\n                                                                color: issueCategories.find(c => c.category === issue.category)?.color\r\n                                                            }}\r\n                                                        >\r\n                                                            {issue.category}\r\n                                                        </div>\r\n                                                        <div className={`priority-indicator priority-${issue.priority}`}>\r\n                                                            <div className={`priority-dot priority-${issue.priority}`}></div>\r\n                                                            {issue.priority} priority\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div className=\"issue-urgency\">\r\n                                                        {issue.urgency}\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <h4 className=\"issue-title\">{issue.title}</h4>\r\n                                                <p className=\"issue-description\">{issue.description}</p>\r\n\r\n                                                <div className=\"issue-meta\">\r\n                                                    <div className=\"meta-item\">\r\n                                                        <MapPin size={16} />\r\n                                                        <span>{issue.location}</span>\r\n                                                    </div>\r\n                                                    <div className=\"meta-item\">\r\n                                                        <Clock size={16} />\r\n                                                        <span>{getRelativeTime(issue.createdAt)}</span>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <div className=\"issue-footer\">\r\n                                                    <div className=\"user-info\">\r\n                                                        <div className=\"user-avatar-small\">\r\n                                                            {issue.userAvatar}\r\n                                                        </div>\r\n                                                        <div className=\"user-details\">\r\n                                                            <span className=\"user-name\">{issue.user}</span>\r\n                                                            <span className=\"report-time\">{getRelativeTime(issue.createdAt)}</span>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <div className=\"issue-actions\">\r\n                                                    <div className=\"vote-section\">\r\n                                                        {/* Upvote */}\r\n                                                        <button\r\n                                                            className={`vote-btn upvote ${userVotes[issue.id] === 'upvote' ? 'voted' : ''}`}\r\n                                                            onClick={() => handleVote(issue.id, 'upvote')}\r\n                                                        >\r\n                                                            <Heart size={16} />\r\n                                                            <span>{issue.counts?.upvote || 0}</span>\r\n                                                        </button>\r\n                                                        {/* Downvote */}\r\n                                                        <button\r\n                                                            className={`vote-btn downvote ${userVotes[issue.id] === 'downvote' ? 'voted' : ''}`}\r\n                                                            onClick={() => handleVote(issue.id, 'downvote')}\r\n                                                        >\r\n                                                            <ThumbsDown size={16} />\r\n                                                            <span>{issue.counts?.downVote || 0}</span>\r\n                                                        </button>\r\n                                                    </div>\r\n\r\n                                                    <div className={`status-badge status-${issue.status.replace(' ', '').toLowerCase()}`}>\r\n                                                        {issue.status}\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                {/* Comments toggle */}\r\n                                                <div className=\"comments-toggle\">\r\n                                                    <button className=\"comments-open-btn\" onClick={() => toggleComments(issue.id)}>\r\n                                                        <ChevronsDown size={14} /> {commentsOpen[issue.id] ? 'Hide' : 'Show'} Comments ({issue.comments || 0})\r\n                                                    </button>\r\n                                                </div>\r\n\r\n                                                {/* Comments panel */}\r\n                                                \r\n                                                {commentsOpen[issue.id] && (\r\n                                                    <div className=\"comments-panel\">\r\n                                                        {/* Add Comment */}\r\n                                                        <div className=\"add-comment\">\r\n                                                            <textarea\r\n                                                                placeholder=\"Write your comment...\"\r\n                                                                value={commentDrafts[issue.id] || ''}\r\n                                                                onChange={(e) => handleCommentChange(issue.id, e.target.value)}\r\n                                                                rows={2}\r\n                                                            />\r\n                                                            <div className=\"comment-actions\">\r\n                                                                <button onClick={() => postComment(issue.id)} disabled={busyComments[issue.id]}>\r\n                                                                    {busyComments[issue.id] ? 'Posting...' : 'Post Comment'}\r\n                                                                </button>\r\n                                                            </div>\r\n                                                        </div>\r\n\r\n                                                        {/* Comments List */}\r\n                                                        {(commentsStore[issue.id] || []).map(c => {\r\n                                                            const commenterName = c.userId?.name || 'User';\r\n                                                            const isOwner = (c.userId?._id || c.userId) === user._id; \r\n                                                            const isEditing = editingComment?.commentId === c._id;\r\n\r\n                                                            return (\r\n                                                                <div key={c._id} className=\"comment-item\">\r\n                                                                    <div className=\"comment-avatar\">{commenterName[0].toUpperCase()}</div>\r\n                                                                    <div className=\"comment-body\">\r\n                                                                        {isEditing ? (\r\n                                                                            <div className=\"edit-comment-area\">\r\n                                                                                <textarea\r\n                                                                                    value={editingComment.content}\r\n                                                                                    onChange={(e) => setEditingComment(prev => ({ ...prev, content: e.target.value }))}\r\n                                                                                    rows={3}\r\n                                                                                />\r\n                                                                                <div className=\"comment-actions\">\r\n                                                                                    <button\r\n                                                                                        onClick={() => updateComment(issue.id, c._id, editingComment.content)}\r\n                                                                                        disabled={busyComments[c._id]}\r\n                                                                                    >\r\n                                                                                        <Save size={14} /> {busyComments[c._id] ? 'Saving...' : 'Save'}\r\n                                                                                    </button>\r\n                                                                                    <button className=\"cancel-edit-btn\" onClick={() => setEditingComment(null)}>Cancel</button>\r\n                                                                                </div>\r\n                                                                            </div>\r\n                                                                        ) : (\r\n                                                                            <>\r\n                                                                                <div className=\"comment-meta\">\r\n                                                                                    <span className=\"comment-author\">{commenterName}</span>\r\n                                                                                    <span className=\"comment-time\">\r\n                                                                                        {getRelativeTime(c.createdAt)} \r\n                                                                                        {c.updatedAt && c.updatedAt.toString() !== c.createdAt.toString() && new Date(c.updatedAt) > new Date(c.createdAt) ? ' (edited)' : ''}\r\n                                                                                    </span>\r\n                                                                                    {isOwner && (\r\n                                                                                        <div className=\"comment-owner-actions\">\r\n                                                                                            <button\r\n                                                                                                className=\"edit-comment-btn\"\r\n                                                                                                onClick={() => startEditComment(c)}\r\n                                                                                            >\r\n                                                                                                <Edit size={14} />\r\n                                                                                            </button>\r\n                                                                                            <button\r\n                                                                                                className=\"delete-comment-btn\"\r\n                                                                                                onClick={() => deleteComment(issue.id, c._id)}\r\n                                                                                            >\r\n                                                                                                ðŸ—‘ï¸\r\n                                                                                            </button>\r\n                                                                                        </div>\r\n                                                                                    )}\r\n                                                                                </div>\r\n                                                                                <div className=\"comment-content\">{c.content}</div>\r\n                                                                            </>\r\n                                                                        )}\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            )\r\n                                                        })}\r\n                                                    </div>\r\n                                                )}\r\n\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <footer className=\"footer\">\r\n                <div className=\"footer-content\">\r\n                    <div className=\"footer-section\">\r\n                        \r\n                        <p className=\"footer-tagline\">Civic Engagement Platform</p>\r\n                        <p>Empowering communities to report, track, and resolve civic issues through collaborative engagement between citizens and local authorities.</p>\r\n                    </div>\r\n                    <div className=\"footer-section\">\r\n                        <h4>Platform</h4>\r\n                        <ul>\r\n                            {/* FIX: Replaced <a> with placeholder href=\"#\" to accessible <button> elements */}\r\n                            <li><button className=\"footer-link-btn\">How it Works</button></li>\r\n                            <li><button className=\"footer-link-btn\">Features</button></li>\r\n                            <li><button className=\"footer-link-btn\">Mobile App</button></li>\r\n                            <li><button className=\"footer-link-btn\">Success Stories</button></li>\r\n                        </ul>\r\n                    </div>\r\n                    <div className=\"footer-section\">\r\n                        <h4>Support</h4>\r\n                        <ul>\r\n                            <li><button className=\"footer-link-btn\">Help Center</button></li>\r\n                            <li><button className=\"footer-link-btn\">Contact Us</button></li>\r\n                            <li><button className=\"footer-link-btn\">Community Guidelines</button></li>\r\n                            <li><button className=\"footer-link-btn\">FAQ</button></li>\r\n                        </ul>\r\n                    </div>\r\n                    <div className=\"footer-section\">\r\n                        <h4>Community</h4>\r\n                        <ul>\r\n                            <li><button className=\"footer-link-btn\">About Us</button></li>\r\n                            <li><button className=\"footer-link-btn\">Blog</button></li>\r\n                            <li><button className=\"footer-link-btn\">Events</button></li>\r\n                            <li><button className=\"footer-link-btn\">Partners</button></li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                <div className=\"footer-bottom\">\r\n                    <p>&copy; 2025 CivicEye. All rights reserved. Making neighborhoods better, one issue at a time.</p>\r\n                </div>\r\n            </footer>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default UserBrowseIssue;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}