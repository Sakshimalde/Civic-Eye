{"ast":null,"code":"import _objectSpread from\"C:/Users/saksh/OneDrive/Desktop/DS/civiceye/civiceye/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback,useMemo}from'react';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import{useAuth}from'../contexts/AuthContext';import{PlusCircle,MapPin,FileText,ArrowRight,BarChart3,Users,Mail,Phone,Globe,Trash2,Lightbulb,Droplet,Wrench}from'lucide-react';import'./Dashboard.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_BASE_URL='http://localhost:3000/api/v1';// Use the base URL for consistency\n// --- Utility Functions (Reusing/Adapting logic from IssuesBrowser) ---\n// Utility to calculate time difference in a user-friendly way\nconst getRelativeTime=isoDateString=>{const reportDate=new Date(isoDateString);const now=new Date();const diffMs=now.getTime()-reportDate.getTime();// Convert to minutes\nconst diffMinutes=Math.round(diffMs/(1000*60));if(diffMinutes<60){return diffMinutes<=1?'Just now':\"\".concat(diffMinutes,\" minutes ago\");}// Convert to hours\nconst diffHours=Math.round(diffMs/(1000*60*60));if(diffHours<24){return\"\".concat(diffHours,\" hours ago\");}// Convert to days, checking for calendar day difference\nconst startOfToday=new Date(now.getFullYear(),now.getMonth(),now.getDate());const startOfReportDay=new Date(reportDate.getFullYear(),reportDate.getMonth(),reportDate.getDate());const diffDays=Math.floor((startOfToday.getTime()-startOfReportDay.getTime())/(1000*60*60*24));if(diffDays===1)return'Yesterday';if(diffDays<7)return\"\".concat(diffDays,\" days ago\");if(diffDays<30)return\"\".concat(Math.floor(diffDays/7),\" weeks ago\");return\"\".concat(Math.floor(diffDays/30),\" months ago\");};// Map server categories to display categories\nconst mapServerCategory=serverAssignedTo=>{const reverseCategoryMap={'Municipal sanitation and public health':'Garbage & Waste','Roads and street infrastructure':'Potholes','Street lighting and electrical assets':'Street Lights','Water, sewerage, and stormwater':'Water Issues','Ward/zone office and central admin':'Vandalism'};return reverseCategoryMap[serverAssignedTo]||'Other';};// Map display categories to icons\nconst getCategoryIcon=category=>{switch(category){case'Garbage & Waste':return/*#__PURE__*/_jsx(Trash2,{size:24});case'Potholes':return/*#__PURE__*/_jsx(Wrench,{size:24});case'Water Issues':return/*#__PURE__*/_jsx(Droplet,{size:24});case'Street Lights':return/*#__PURE__*/_jsx(Lightbulb,{size:24});default:return/*#__PURE__*/_jsx(FileText,{size:24});}};const Dashboard=()=>{const{user,signOut}=useAuth();const navigate=useNavigate();// Renamed state to hold ALL fetched complaints for dashboard aggregation\nconst[allComplaints,setAllComplaints]=useState([]);const[loading,setLoading]=useState(true);const[,setError]=useState(null);// State to handle initial authentication check\nconst[authChecked,setAuthChecked]=useState(false);// --- Dynamic Dashboard Data Calculation using useMemo ---\n// 1. Complaint Aggregation and Recent Reports\nconst{totalReports,activeIssues,resolvedIssues,pendingIssues,recentReports,issueCategories}=useMemo(()=>{let totals={totalReports:allComplaints.length,activeIssues:0,resolvedIssues:0,pendingIssues:0};const categoryCounts={'Garbage & Waste':{count:0,icon:/*#__PURE__*/_jsx(Trash2,{size:24})},'Potholes':{count:0,icon:/*#__PURE__*/_jsx(Wrench,{size:24})},'Water Issues':{count:0,icon:/*#__PURE__*/_jsx(Droplet,{size:24})},'Street Lights':{count:0,icon:/*#__PURE__*/_jsx(Lightbulb,{size:24})},'Other':{count:0,icon:/*#__PURE__*/_jsx(FileText,{size:24})}};allComplaints.forEach(comp=>{const status=comp.status;const displayCategory=mapServerCategory(comp.assignedTo);// Tally status counts\nif(status==='recived'||status==='inReview'){totals.activeIssues++;if(status==='recived'){totals.pendingIssues++;}}if(status==='resolved'){totals.resolvedIssues++;}// Tally category counts\nif(categoryCounts[displayCategory]){categoryCounts[displayCategory].count++;}else{categoryCounts['Other'].count++;}});// Get the top 3 recent reports (sorted by creation time)\nconst sortedReports=[...allComplaints].sort((a,b)=>new Date(b.createdAt)-new Date(a.createdAt)).slice(0,3);const mappedRecentReports=sortedReports.map(comp=>{var _comp$address;return{title:comp.title,// Use the first address entry or fallback\nlocation:((_comp$address=comp.address)===null||_comp$address===void 0?void 0:_comp$address[0])||'Unknown Location',// Mock data for now, actual votes should come from backend aggregation\nvotes:comp.mockVotes||Math.floor(Math.random()*30),time:getRelativeTime(comp.createdAt),status:comp.status==='recived'?'Pending':comp.status==='inReview'?'In Progress':comp.status==='resolved'?'Resolved':'Pending'};});// Convert category map back to array format for rendering\nconst finalCategories=Object.keys(categoryCounts).filter(cat=>categoryCounts[cat].count>0||cat!=='Other')// Hide 'Other' if count is zero\n.map(cat=>({category:cat,count:categoryCounts[cat].count,icon:categoryCounts[cat].icon}));return _objectSpread(_objectSpread({},totals),{},{recentReports:mappedRecentReports,issueCategories:finalCategories});},[allComplaints]);// --- API Fetch Function ---\nconst fetchComplaints=useCallback(async()=>{if(!user)return;// Should already be guarded by the useEffect below\nsetLoading(true);try{// NOTE: We fetch ALL complaints to perform local aggregation for the dashboard stats\nconst res=await axios.get(\"\".concat(API_BASE_URL,\"/complaints/all\"),{withCredentials:true});// Simulate adding mock data (votes/views) since your current backend only returns basic complaint data\nconst enrichedData=res.data.data.map(comp=>_objectSpread(_objectSpread({},comp),{},{mockVotes:Math.floor(Math.random()*30)}));setAllComplaints(enrichedData);}catch(err){var _err$response,_err$response2,_err$response2$data;console.error(\"Failed to fetch complaints:\",((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data)||err.message);setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||'Failed to fetch complaints');}finally{setLoading(false);}},[user]);// --- Authentication and Data Fetch Effects ---\n// 1. Initial Auth Check (to prevent flash of unauthenticated content)\nuseEffect(()=>{// Assume AuthContext performs the actual token check/user loading.\n// We simulate the check completion here.\nsetAuthChecked(true);},[]);// 2. Data Fetch\nuseEffect(()=>{if(authChecked&&user){fetchComplaints();}else if(authChecked&&!user){// If auth check is complete and no user, redirect to login\nnavigate('/login');}},[user,authChecked,navigate,fetchComplaints]);const handleLogout=()=>{axios.post(\"\".concat(API_BASE_URL,\"/users/logout\"),{},{withCredentials:true}).catch(()=>{}).finally(()=>{signOut();navigate('/');});};const getUserInitials=name=>{if(!name)return'JD';const nameParts=name.split(' ');const initials=nameParts.map(part=>part[0]).join('');return initials.toUpperCase();};// --- Conditional Rendering ---\nif(!authChecked||loading){return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',justifyContent:'center',alignItems:'center',height:'100vh',gap:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:loading?'Loading dashboard data...':'Checking authentication...'})]});}if(!user){// This case should primarily be handled by the useEffect redirect, but remains as a guard\nreturn null;}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header-top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-section\",children:/*#__PURE__*/_jsx(\"div\",{className:\"logo-text\",children:\"CivicEye\"})}),/*#__PURE__*/_jsxs(\"nav\",{className:\"nav-links\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"active\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(Link,{to:\"/browse-issues\",children:\"Browse Issues\"}),/*#__PURE__*/_jsx(Link,{to:\"/report-issue\",children:\"Report Issue\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-profile\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/profile\",className:\"profile-link\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-initials\",children:getUserInitials(user.name)}),/*#__PURE__*/_jsx(\"span\",{className:\"user-name\",children:user.name})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-btn-header\",children:/*#__PURE__*/_jsx(ArrowRight,{size:20})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-hero\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"hero-content-wrapper\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",user.name.split(' ')[0],\"!\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Together, we're making our community cleaner and safer. Monitor progress, track impact, and see how your contributions make a difference.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"hero-buttons\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/report-issue\",className:\"hero-btn-primary inline-flex items-center gap-2\",children:[/*#__PURE__*/_jsx(PlusCircle,{size:16}),\"Report A New Issue\"]}),/*#__PURE__*/_jsx(Link,{to:\"/browse-issues\",className:\"hero-btn-secondary inline-flex items-center gap-2\",children:\"Browse Issues\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-stats-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"stat-card total-reports-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-info-text\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"stat-value\",children:totalReports}),/*#__PURE__*/_jsx(\"p\",{className:\"stat-label\",children:\"Total Reports\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon-container\",children:/*#__PURE__*/_jsx(\"span\",{className:\"stat-icon\",children:\"\\uD83D\\uDCC8\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-card active-issues-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-info-text\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"stat-value\",children:activeIssues}),/*#__PURE__*/_jsx(\"p\",{className:\"stat-label\",children:\"Active Issues\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon-container\",children:/*#__PURE__*/_jsx(\"span\",{className:\"stat-icon\",children:\"\\uD83D\\uDD25\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-card resolved-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-info-text\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"stat-value\",children:resolvedIssues}),/*#__PURE__*/_jsx(\"p\",{className:\"stat-label\",children:\"Resolved Issues\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon-container\",children:/*#__PURE__*/_jsx(\"span\",{className:\"stat-icon\",children:\"\\u2705\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-card pending-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"stat-content-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-info-text\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"stat-value\",children:pendingIssues}),/*#__PURE__*/_jsx(\"p\",{className:\"stat-label\",children:\"Pending Issues\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"stat-icon-container\",children:/*#__PURE__*/_jsx(\"span\",{className:\"stat-icon\",children:\"\\u23F3\"})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-main\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"dashboard-sidebar-panels\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel issue-categories-panel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"panel-header\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(BarChart3,{size:20}),\" Issue Categories\"]})}),/*#__PURE__*/_jsx(\"p\",{className:\"panel-subtitle\",children:\"Current active issues by type\"}),/*#__PURE__*/_jsx(\"div\",{className:\"categories-list\",children:issueCategories.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"category-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"category-icon-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"category-icon\",children:item.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"category-title\",children:item.category})]}),/*#__PURE__*/_jsx(\"span\",{className:\"category-count\",children:item.count})]},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel community-impact-panel\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(Users,{size:20}),\" Community Impact\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"impact-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"impact-stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Issues Resolved\"}),/*#__PURE__*/_jsxs(\"strong\",{children:[resolvedIssues,\" \",/*#__PURE__*/_jsx(\"small\",{children:\"total\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"impact-stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Response Time\"}),/*#__PURE__*/_jsxs(\"strong\",{children:[\"N/A \",/*#__PURE__*/_jsx(\"small\",{children:\"avg\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"impact-stat-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Community Score\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"N/A\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"dashboard-content-panels\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel recent-reports-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(FileText,{size:20}),\" Recent Community Reports\"]}),/*#__PURE__*/_jsxs(Link,{to:\"/browse-issues\",className:\"view-all\",children:[\"View All \",/*#__PURE__*/_jsx(ArrowRight,{size:16})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"panel-subtitle\",children:\"Latest issues reported by the community\"}),/*#__PURE__*/_jsx(\"div\",{className:\"reports-list\",children:recentReports.length>0?recentReports.map((report,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"report-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"report-details\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"report-title\",children:report.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-meta\",children:[/*#__PURE__*/_jsx(MapPin,{size:16}),\" \",report.location]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-label status-\".concat(report.status.replace(/\\s/g,'').toLowerCase()),children:report.status}),/*#__PURE__*/_jsxs(\"span\",{className:\"report-votes\",children:[report.votes,\" votes\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"report-time\",children:report.time})]})]})},index)):/*#__PURE__*/_jsx(\"div\",{className:\"empty-state-dashboard\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"No recent reports found. Be the first to \",/*#__PURE__*/_jsx(Link,{to:\"/report-issue\",children:\"report an issue\"}),\"!\"]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel quick-actions-panel\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(PlusCircle,{size:20}),\" Quick Actions\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions-grid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"action-card primary\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/report-issue'),children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Report Issue\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Help improve your community\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"action-card secondary\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/browse-issues'),children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Browse Issues\"}),/*#__PURE__*/_jsx(\"p\",{children:\"See what others reported\"})]})})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"footer\",{className:\"footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"footer-column footer-logo-section\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-section\",children:/*#__PURE__*/_jsx(\"div\",{className:\"logo-text\",children:\"CivicEye\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"footer-tagline\",children:\"Civic Engagement Platform\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Empowering communities to report, track, and resolve civic issues through collaborative engagement between citizens and local authorities.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"contact-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Mail,{size:16}),\" \",/*#__PURE__*/_jsx(\"a\",{href:\"mailto:hello@civiceye.org\",children:\"hello@civiceye.org\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Phone,{size:16}),\" \",/*#__PURE__*/_jsx(\"a\",{href:\"tel:5551234567\",children:\"(555) 123-4567\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Globe,{size:16}),\" \",/*#__PURE__*/_jsx(\"a\",{href:\"http://www.civiceye.org\",target:\"_blank\",rel:\"noopener noreferrer\",children:\"www.civiceye.org\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-column\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Platform\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/how-it-works\",children:\"How it Works\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/features\",children:\"Features\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/pricing\",children:\"Pricing\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/mobile-app\",children:\"Mobile App\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-column\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Support\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/help-center\",children:\"Help Center\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/contact\",children:\"Contact Us\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/user-guide\",children:\"User Guide\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/community-forum\",children:\"Community Forum\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-column\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Company\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/about\",children:\"About Us\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/careers\",children:\"Careers\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/press\",children:\"Press Kit\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/blog\",children:\"Blog\"})})]})]})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","Link","useNavigate","axios","useAuth","PlusCircle","MapPin","FileText","ArrowRight","BarChart3","Users","Mail","Phone","Globe","Trash2","Lightbulb","Droplet","Wrench","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_BASE_URL","getRelativeTime","isoDateString","reportDate","Date","now","diffMs","getTime","diffMinutes","Math","round","concat","diffHours","startOfToday","getFullYear","getMonth","getDate","startOfReportDay","diffDays","floor","mapServerCategory","serverAssignedTo","reverseCategoryMap","getCategoryIcon","category","size","Dashboard","user","signOut","navigate","allComplaints","setAllComplaints","loading","setLoading","setError","authChecked","setAuthChecked","totalReports","activeIssues","resolvedIssues","pendingIssues","recentReports","issueCategories","totals","length","categoryCounts","count","icon","forEach","comp","status","displayCategory","assignedTo","sortedReports","sort","a","b","createdAt","slice","mappedRecentReports","map","_comp$address","title","location","address","votes","mockVotes","random","time","finalCategories","Object","keys","filter","cat","_objectSpread","fetchComplaints","res","get","withCredentials","enrichedData","data","err","_err$response","_err$response2","_err$response2$data","console","error","response","message","handleLogout","post","catch","finally","getUserInitials","name","nameParts","split","initials","part","join","toUpperCase","style","display","flexDirection","justifyContent","alignItems","height","gap","children","className","to","onClick","item","index","report","replace","toLowerCase","href","target","rel"],"sources":["C:/Users/saksh/OneDrive/Desktop/DS/civiceye/civiceye/frontend/src/pages/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { PlusCircle, MapPin, FileText, ArrowRight, BarChart3, Users, Mail, Phone, Globe, Trash2, Lightbulb, Droplet, Wrench } from 'lucide-react';\r\nimport './Dashboard.css';\r\n\r\nconst API_BASE_URL = 'http://localhost:3000/api/v1'; // Use the base URL for consistency\r\n\r\n// --- Utility Functions (Reusing/Adapting logic from IssuesBrowser) ---\r\n\r\n// Utility to calculate time difference in a user-friendly way\r\nconst getRelativeTime = (isoDateString) => {\r\n    const reportDate = new Date(isoDateString);\r\n    const now = new Date();\r\n    const diffMs = now.getTime() - reportDate.getTime();\r\n    \r\n    // Convert to minutes\r\n    const diffMinutes = Math.round(diffMs / (1000 * 60));\r\n\r\n    if (diffMinutes < 60) {\r\n        return diffMinutes <= 1 ? 'Just now' : `${diffMinutes} minutes ago`;\r\n    }\r\n\r\n    // Convert to hours\r\n    const diffHours = Math.round(diffMs / (1000 * 60 * 60));\r\n    if (diffHours < 24) {\r\n        return `${diffHours} hours ago`;\r\n    }\r\n\r\n    // Convert to days, checking for calendar day difference\r\n    const startOfToday = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n    const startOfReportDay = new Date(reportDate.getFullYear(), reportDate.getMonth(), reportDate.getDate());\r\n    const diffDays = Math.floor((startOfToday.getTime() - startOfReportDay.getTime()) / (1000 * 60 * 60 * 24));\r\n\r\n    if (diffDays === 1) return 'Yesterday';\r\n    if (diffDays < 7) return `${diffDays} days ago`;\r\n    if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;\r\n    return `${Math.floor(diffDays / 30)} months ago`;\r\n};\r\n\r\n\r\n// Map server categories to display categories\r\nconst mapServerCategory = (serverAssignedTo) => {\r\n    const reverseCategoryMap = {\r\n        'Municipal sanitation and public health': 'Garbage & Waste',\r\n        'Roads and street infrastructure': 'Potholes',\r\n        'Street lighting and electrical assets': 'Street Lights',\r\n        'Water, sewerage, and stormwater': 'Water Issues',\r\n        'Ward/zone office and central admin': 'Vandalism'\r\n    };\r\n    return reverseCategoryMap[serverAssignedTo] || 'Other';\r\n};\r\n\r\n// Map display categories to icons\r\nconst getCategoryIcon = (category) => {\r\n    switch (category) {\r\n        case 'Garbage & Waste': return <Trash2 size={24} />;\r\n        case 'Potholes': return <Wrench size={24} />;\r\n        case 'Water Issues': return <Droplet size={24} />;\r\n        case 'Street Lights': return <Lightbulb size={24} />;\r\n        default: return <FileText size={24} />;\r\n    }\r\n};\r\n\r\nconst Dashboard = () => {\r\n    const { user, signOut } = useAuth();\r\n    const navigate = useNavigate();\r\n    \r\n    // Renamed state to hold ALL fetched complaints for dashboard aggregation\r\n    const [allComplaints, setAllComplaints] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [, setError] = useState(null);\r\n    \r\n    // State to handle initial authentication check\r\n    const [authChecked, setAuthChecked] = useState(false);\r\n\r\n    // --- Dynamic Dashboard Data Calculation using useMemo ---\r\n    \r\n    // 1. Complaint Aggregation and Recent Reports\r\n    const { totalReports, activeIssues, resolvedIssues, pendingIssues, recentReports, issueCategories } = useMemo(() => {\r\n        let totals = {\r\n            totalReports: allComplaints.length,\r\n            activeIssues: 0,\r\n            resolvedIssues: 0,\r\n            pendingIssues: 0,\r\n        };\r\n        const categoryCounts = {\r\n            'Garbage & Waste': { count: 0, icon: <Trash2 size={24} /> },\r\n            'Potholes': { count: 0, icon: <Wrench size={24} /> },\r\n            'Water Issues': { count: 0, icon: <Droplet size={24} /> },\r\n            'Street Lights': { count: 0, icon: <Lightbulb size={24} /> },\r\n            'Other': { count: 0, icon: <FileText size={24} /> },\r\n        };\r\n\r\n        allComplaints.forEach(comp => {\r\n            const status = comp.status;\r\n            const displayCategory = mapServerCategory(comp.assignedTo);\r\n\r\n            // Tally status counts\r\n            if (status === 'recived' || status === 'inReview') {\r\n                totals.activeIssues++;\r\n                if (status === 'recived') {\r\n                    totals.pendingIssues++;\r\n                }\r\n            }\r\n            if (status === 'resolved') {\r\n                totals.resolvedIssues++;\r\n            }\r\n            \r\n            // Tally category counts\r\n            if (categoryCounts[displayCategory]) {\r\n                categoryCounts[displayCategory].count++;\r\n            } else {\r\n                categoryCounts['Other'].count++;\r\n            }\r\n        });\r\n\r\n        // Get the top 3 recent reports (sorted by creation time)\r\n        const sortedReports = [...allComplaints]\r\n            .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))\r\n            .slice(0, 3);\r\n\r\n        const mappedRecentReports = sortedReports.map(comp => ({\r\n            title: comp.title,\r\n            // Use the first address entry or fallback\r\n            location: comp.address?.[0] || 'Unknown Location', \r\n            // Mock data for now, actual votes should come from backend aggregation\r\n            votes: comp.mockVotes || Math.floor(Math.random() * 30), \r\n            time: getRelativeTime(comp.createdAt),\r\n            status: comp.status === 'recived' ? 'Pending' : comp.status === 'inReview' ? 'In Progress' : comp.status === 'resolved' ? 'Resolved' : 'Pending',\r\n        }));\r\n        \r\n        // Convert category map back to array format for rendering\r\n        const finalCategories = Object.keys(categoryCounts)\r\n            .filter(cat => categoryCounts[cat].count > 0 || cat !== 'Other') // Hide 'Other' if count is zero\r\n            .map(cat => ({\r\n                category: cat,\r\n                count: categoryCounts[cat].count,\r\n                icon: categoryCounts[cat].icon,\r\n            }));\r\n\r\n        return {\r\n            ...totals,\r\n            recentReports: mappedRecentReports,\r\n            issueCategories: finalCategories,\r\n        };\r\n    }, [allComplaints]);\r\n    \r\n    \r\n    // --- API Fetch Function ---\r\n    const fetchComplaints = useCallback(async () => {\r\n        if (!user) return; // Should already be guarded by the useEffect below\r\n\r\n        setLoading(true);\r\n        try {\r\n            // NOTE: We fetch ALL complaints to perform local aggregation for the dashboard stats\r\n            const res = await axios.get(`${API_BASE_URL}/complaints/all`, {\r\n                withCredentials: true,\r\n            });\r\n            \r\n            // Simulate adding mock data (votes/views) since your current backend only returns basic complaint data\r\n            const enrichedData = res.data.data.map(comp => ({\r\n                ...comp,\r\n                mockVotes: Math.floor(Math.random() * 30),\r\n            }));\r\n\r\n            setAllComplaints(enrichedData);\r\n        } catch (err) {\r\n            console.error(\"Failed to fetch complaints:\", err.response?.data || err.message);\r\n            setError(err.response?.data?.message || 'Failed to fetch complaints');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [user]);\r\n\r\n    // --- Authentication and Data Fetch Effects ---\r\n\r\n    // 1. Initial Auth Check (to prevent flash of unauthenticated content)\r\n    useEffect(() => {\r\n        // Assume AuthContext performs the actual token check/user loading.\r\n        // We simulate the check completion here.\r\n        setAuthChecked(true); \r\n    }, []);\r\n\r\n    // 2. Data Fetch\r\n    useEffect(() => {\r\n        if (authChecked && user) {\r\n            fetchComplaints();\r\n        } else if (authChecked && !user) {\r\n             // If auth check is complete and no user, redirect to login\r\n             navigate('/login');\r\n        }\r\n    }, [user, authChecked, navigate, fetchComplaints]);\r\n\r\n\r\n    const handleLogout = () => {\r\n        axios.post(`${API_BASE_URL}/users/logout`, {}, { withCredentials: true })\r\n            .catch(() => {})\r\n            .finally(() => {\r\n                signOut();\r\n                navigate('/');\r\n            });\r\n    };\r\n\r\n    const getUserInitials = (name) => {\r\n        if (!name) return 'JD';\r\n        const nameParts = name.split(' ');\r\n        const initials = nameParts.map(part => part[0]).join('');\r\n        return initials.toUpperCase();\r\n    };\r\n\r\n    // --- Conditional Rendering ---\r\n    \r\n    if (!authChecked || loading) {\r\n        return (\r\n            <div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'center', alignItems: 'center', height: '100vh', gap: '10px' }}>\r\n                <div className=\"loading-spinner\"></div>\r\n                <p>{loading ? 'Loading dashboard data...' : 'Checking authentication...'}</p>\r\n            </div>\r\n        );\r\n    }\r\n    \r\n    if (!user) {\r\n        // This case should primarily be handled by the useEffect redirect, but remains as a guard\r\n        return null;\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <header className=\"header-top\">\r\n                <div className=\"logo-section\">\r\n                    \r\n                    <div className=\"logo-text\">CivicEye</div>\r\n                </div>\r\n                <nav className=\"nav-links\">\r\n                    <Link to=\"/dashboard\" className=\"active\">Dashboard</Link>\r\n                    <Link to=\"/browse-issues\">Browse Issues</Link>\r\n                    <Link to=\"/report-issue\">Report Issue</Link>\r\n                </nav>\r\n                <div className=\"user-profile\">\r\n                    <Link to=\"/profile\" className=\"profile-link\">\r\n                        <div className=\"user-initials\">{getUserInitials(user.name)}</div>\r\n                        <span className=\"user-name\">{user.name}</span>\r\n                    </Link>\r\n                    <button onClick={handleLogout} className=\"logout-btn-header\">\r\n                        <ArrowRight size={20} />\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            <div className=\"dashboard-container\">\r\n                <div className=\"dashboard-hero\">\r\n                    <div className=\"hero-content-wrapper\">\r\n                        <h2>Welcome, {user.name.split(' ')[0]}!</h2>\r\n                        <p>Together, we're making our community cleaner and safer. Monitor progress, track impact, and see how your contributions make a difference.</p>\r\n                        <div className=\"hero-buttons\">\r\n                            <Link to=\"/report-issue\" className=\"hero-btn-primary inline-flex items-center gap-2\">\r\n                                <PlusCircle size={16} />\r\n                                Report A New Issue\r\n                            </Link>\r\n                            <Link to=\"/browse-issues\" className=\"hero-btn-secondary inline-flex items-center gap-2\">\r\n                            Browse Issues\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"dashboard-stats-row\">\r\n                    <div className=\"stat-card total-reports-card\">\r\n                        {/* FIX: Use a flex container to align text and icon */}\r\n                        <div className=\"stat-content-wrapper\">\r\n                            <div className=\"stat-info-text\">\r\n                                <h3 className=\"stat-value\">{totalReports}</h3>\r\n                                <p className=\"stat-label\">Total Reports</p>\r\n                            </div>\r\n                            <div className=\"stat-icon-container\">\r\n                                <span className=\"stat-icon\">üìà</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"stat-card active-issues-card\">\r\n                        <div className=\"stat-content-wrapper\">\r\n                            <div className=\"stat-info-text\">\r\n                                <h3 className=\"stat-value\">{activeIssues}</h3>\r\n                                <p className=\"stat-label\">Active Issues</p>\r\n                            </div>\r\n                            <div className=\"stat-icon-container\">\r\n                                <span className=\"stat-icon\">üî•</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"stat-card resolved-card\">\r\n                        <div className=\"stat-content-wrapper\">\r\n                            <div className=\"stat-info-text\">\r\n                                <h3 className=\"stat-value\">{resolvedIssues}</h3>\r\n                                <p className=\"stat-label\">Resolved Issues</p>\r\n                            </div>\r\n                            <div className=\"stat-icon-container\">\r\n                                <span className=\"stat-icon\">‚úÖ</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"stat-card pending-card\">\r\n                        <div className=\"stat-content-wrapper\">\r\n                            <div className=\"stat-info-text\">\r\n                                <h3 className=\"stat-value\">{pendingIssues}</h3>\r\n                                <p className=\"stat-label\">Pending Issues</p>\r\n                            </div>\r\n                            <div className=\"stat-icon-container\">\r\n                                <span className=\"stat-icon\">‚è≥</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"dashboard-main\">\r\n                    <aside className=\"dashboard-sidebar-panels\">\r\n                        <div className=\"panel issue-categories-panel\">\r\n                            <div className=\"panel-header\">\r\n                                <h3><BarChart3 size={20} /> Issue Categories</h3>\r\n                            </div>\r\n                            <p className=\"panel-subtitle\">Current active issues by type</p>\r\n                            <div className=\"categories-list\">\r\n                                {issueCategories.map((item, index) => (\r\n                                    <div key={index} className=\"category-item\">\r\n                                        <div className=\"category-icon-title\">\r\n                                            <span className=\"category-icon\">{item.icon}</span>\r\n                                            <span className=\"category-title\">{item.category}</span>\r\n                                        </div>\r\n                                        <span className=\"category-count\">{item.count}</span>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"panel community-impact-panel\">\r\n                            <h3><Users size={20} /> Community Impact</h3>\r\n                            <div className=\"impact-stats\">\r\n                                <div className=\"impact-stat-item\">\r\n                                    <span>Issues Resolved</span>\r\n                                    {/* Using resolvedIssues count for dynamic data */}\r\n                                    <strong>{resolvedIssues} <small>total</small></strong>\r\n                                </div>\r\n                                <div className=\"impact-stat-item\">\r\n                                    <span>Response Time</span>\r\n                                    <strong>N/A <small>avg</small></strong>\r\n                                </div>\r\n                                <div className=\"impact-stat-item\">\r\n                                    <span>Community Score</span>\r\n                                    <strong>N/A</strong>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </aside>\r\n\r\n                    <main className=\"dashboard-content-panels\">\r\n                        <div className=\"panel recent-reports-panel\">\r\n                            <div className=\"panel-header\">\r\n                                <h3><FileText size={20} /> Recent Community Reports</h3>\r\n                                <Link to=\"/browse-issues\" className=\"view-all\">View All <ArrowRight size={16} /></Link>\r\n                            </div>\r\n                            <p className=\"panel-subtitle\">Latest issues reported by the community</p>\r\n                            <div className=\"reports-list\">\r\n                                {recentReports.length > 0 ? (\r\n                                    recentReports.map((report, index) => (\r\n                                        <div key={index} className=\"report-card\">\r\n                                            <div className=\"report-details\">\r\n                                                <h4 className=\"report-title\">{report.title}</h4>\r\n                                                <div className=\"report-meta\">\r\n                                                    <MapPin size={16} /> {report.location}\r\n                                                </div>\r\n                                                <div className=\"report-info\">\r\n                                                    <span className={`status-label status-${report.status.replace(/\\s/g, '').toLowerCase()}`}>{report.status}</span>\r\n                                                    <span className=\"report-votes\">{report.votes} votes</span>\r\n                                                    <span className=\"report-time\">{report.time}</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))\r\n                                ) : (\r\n                                    <div className=\"empty-state-dashboard\">\r\n                                        <p>No recent reports found. Be the first to <Link to=\"/report-issue\">report an issue</Link>!</p>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"panel quick-actions-panel\">\r\n                            <h3><PlusCircle size={20} /> Quick Actions</h3>\r\n                            <div className=\"actions-grid\">\r\n                                <div className=\"action-card primary\">\r\n                                    <button onClick={() => navigate('/report-issue')}>\r\n                                        <h4>Report Issue</h4>\r\n                                        <p>Help improve your community</p>\r\n                                    </button>\r\n                                </div>\r\n                                <div className=\"action-card secondary\">\r\n                                    <button onClick={() => navigate('/browse-issues')}>\r\n                                        <h4>Browse Issues</h4>\r\n                                        <p>See what others reported</p>\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </main>\r\n                </div>\r\n            </div>\r\n\r\n            <footer className=\"footer\">\r\n                <div className=\"footer-column footer-logo-section\">\r\n                    <div className=\"logo-section\">\r\n                        \r\n                        <div className=\"logo-text\">CivicEye</div>\r\n                    </div>\r\n                    <p className=\"footer-tagline\">Civic Engagement Platform</p>\r\n                    <p>Empowering communities to report, track, and resolve civic issues through collaborative engagement between citizens and local authorities.</p>\r\n                    <div className=\"contact-info\">\r\n                        <p><Mail size={16} /> <a href=\"mailto:hello@civiceye.org\">hello@civiceye.org</a></p>\r\n                        <p><Phone size={16} /> <a href=\"tel:5551234567\">(555) 123-4567</a></p>\r\n                        <p><Globe size={16} /> <a href=\"http://www.civiceye.org\" target=\"_blank\" rel=\"noopener noreferrer\">www.civiceye.org</a></p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"footer-column\">\r\n                    <h4>Platform</h4>\r\n                    <ul>\r\n                        <li><Link to=\"/how-it-works\">How it Works</Link></li>\r\n                        <li><Link to=\"/features\">Features</Link></li>\r\n                        <li><Link to=\"/pricing\">Pricing</Link></li>\r\n                        <li><Link to=\"/mobile-app\">Mobile App</Link></li>\r\n                    </ul>\r\n                </div>\r\n                <div className=\"footer-column\">\r\n                    <h4>Support</h4>\r\n                    <ul>\r\n                        <li><Link to=\"/help-center\">Help Center</Link></li>\r\n                        <li><Link to=\"/contact\">Contact Us</Link></li>\r\n                        <li><Link to=\"/user-guide\">User Guide</Link></li>\r\n                        <li><Link to=\"/community-forum\">Community Forum</Link></li>\r\n                    </ul>\r\n                </div>\r\n                <div className=\"footer-column\">\r\n                    <h4>Company</h4>\r\n                    <ul>\r\n                        <li><Link to=\"/about\">About Us</Link></li>\r\n                        <li><Link to=\"/careers\">Careers</Link></li>\r\n                        <li><Link to=\"/press\">Press Kit</Link></li>\r\n                        <li><Link to=\"/blog\">Blog</Link></li>\r\n                    </ul>\r\n                </div>\r\n            </footer>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}