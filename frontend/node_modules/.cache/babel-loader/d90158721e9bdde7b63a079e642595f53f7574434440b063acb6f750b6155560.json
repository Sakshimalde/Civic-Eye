{"ast":null,"code":"import _objectSpread from\"C:/Users/saksh/OneDrive/Desktop/DS/civiceye/civiceye/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useCallback,useMemo}from'react';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import{useAuth}from'../contexts/AuthContext';import{MapPin,Camera,AlertCircle,ArrowRight,User,FileText,Map,Navigation,Mail,Phone,Globe,X,Search}from'lucide-react';import MapComponent from'./MapComponent';// Assuming this component exists and works\nimport'./ReportIssue.css';// Assuming you have the corresponding CSS file\n// --- Configuration Mapping for Backend Integration ---\n// Map frontend categories to the backend's Complaint model 'assignedTo' enum\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CATEGORY_TO_ASSIGNEDTO_MAP={'Garbage & Waste':'Municipal sanitation and public health','Potholes':'Roads and street infrastructure','Street Lights':'Street lighting and electrical assets','Water Issues':'Water, sewerage, and stormwater','Vandalism':'Ward/zone office and central admin',// A common fallback for public area issues\n'Other':'Ward/zone office and central admin'};const UserReportIssue=()=>{const{user,signOut}=useAuth();const navigate=useNavigate();const fileInputRef=useRef(null);const[formData,setFormData]=useState({title:'',category:'Select issue category',// Maps to 'assignedTo' in backend\ndescription:'',location:'',// User-friendly address string\nadditionalAddress:'',// Maps to 'address' array in backend\nvolunteer:'Select a volunteer (optional)',// Not used in backend model, remove or ignore\npriority:'medium',// Not used in backend model, remove or ignore\nphoto:null,// File object\nphotoPreview:null// URL for preview\n});const[loading,setLoading]=useState(false);const[showMapModal,setShowMapModal]=useState(false);const[selectedLocation,setSelectedLocation]=useState(null);// { lat, lng, address }\nconst[mapLoading,setMapLoading]=useState(false);const[searchQuery,setSearchQuery]=useState('');const[searchResults,setSearchResults]=useState([]);const[isSearching,setIsSearching]=useState(false);const API_BASE_URL='http://localhost:3000/api/v1';// Assuming default server config\nconst categories=useMemo(()=>['Select issue category','Garbage & Waste','Potholes','Water Issues','Street Lights','Vandalism','Other'],[]);// Priorities and Volunteers are not directly mapped to the Complaint model but kept for frontend UX\nconst priorityLevels=useMemo(()=>[{level:'low',label:'Low Priority',description:'Minor issue - expected response within 7-10 days',color:'游릭'},{level:'medium',label:'Medium Priority',description:'Moderate issue - expected response within 3-5 days',color:'游리'},{level:'high',label:'High Priority',description:'Urgent issue - expected response within 24-48 hours',color:'游댮'}],[]);// Define volunteers separately to manage the optional field\nconst volunteers=useMemo(()=>['Select a volunteer (optional)','Community Volunteer Group A','Neighborhood Watch Team','Local Cleanup Crew','Individual Volunteer'],[]);const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleFileChange=e=>{const file=e.target.files[0];if(file){if(file.size>10*1024*1024){alert('File size must be less than 10MB');return;}if(!file.type.startsWith('image/')){alert('Please select an image file (JPG, PNG)');return;}const previewUrl=URL.createObjectURL(file);setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{photo:file,photoPreview:previewUrl}));}};const removePhoto=()=>{if(formData.photoPreview){URL.revokeObjectURL(formData.photoPreview);}setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{photo:null,photoPreview:null}));if(fileInputRef.current){fileInputRef.current.value='';}};const reverseGeocode=async(lat,lng)=>{const response=await fetch(\"https://nominatim.openstreetmap.org/reverse?format=json&lat=\".concat(lat,\"&lon=\").concat(lng,\"&zoom=18&addressdetails=1\"));const data=await response.json();return data.display_name||\"Lat: \".concat(lat.toFixed(6),\", Lng: \").concat(lng.toFixed(6));};const getCurrentLocation=useCallback(()=>{setMapLoading(true);if(!navigator.geolocation){alert('Geolocation is not supported by your browser');setMapLoading(false);return;}navigator.geolocation.getCurrentPosition(async position=>{const{latitude,longitude}=position.coords;try{const address=await reverseGeocode(latitude,longitude);setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{location:address}));setSelectedLocation({lat:latitude,lng:longitude,address:address});alert(\"Location set to: \".concat(address));}catch(error){console.error('Error getting address:',error);alert('Error getting address for location. Coordinates saved.');}finally{setMapLoading(false);}},error=>{console.error('Error getting location:',error);setMapLoading(false);alert(\"Location error (\".concat(error.code,\"): \").concat(error.message,\". Please select on map or enter manually.\"));},{enableHighAccuracy:true,timeout:15000,maximumAge:60000});},[]);const searchLocations=useCallback(async query=>{if(!query.trim()){setSearchResults([]);return;}setIsSearching(true);try{const response=await fetch(\"https://nominatim.openstreetmap.org/search?format=json&q=\".concat(encodeURIComponent(query),\"&limit=5&addressdetails=1\"));const data=await response.json();setSearchResults(data);}catch(error){console.error('Error searching locations:',error);alert('Error searching for locations. Please try again.');}finally{setIsSearching(false);}},[]);const handleLocationSelect=useCallback(result=>{const address=result.display_name;const lat=parseFloat(result.lat);const lng=parseFloat(result.lon);setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{location:address}));setSelectedLocation({lat:lat,lng:lng,address:address});setSearchQuery('');setSearchResults([]);setShowMapModal(false);alert(\"Location set to: \".concat(address));},[]);const handleMapLocationSelect=useCallback(async(lat,lng)=>{try{const address=await reverseGeocode(lat,lng);setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{location:address}));setSelectedLocation({lat:lat,lng:lng,address:address});setShowMapModal(false);alert(\"Location set to: \".concat(address));}catch(error){console.error('Error reverse geocoding:',error);const fallbackAddress=\"Lat: \".concat(lat.toFixed(6),\", Lng: \").concat(lng.toFixed(6));setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{location:fallbackAddress}));setShowMapModal(false);alert(\"Location set to coordinates: \".concat(fallbackAddress));}},[]);// --- Submission Logic Integration ---\n// ... (lines 1-136, including all imports and state initialization, remain the same)\n// --- Submission Logic Integration ---\nconst handleSubmit=async e=>{e.preventDefault();// 1. Frontend Validation\nconst trimmedTitle=formData.title.trim();const trimmedDescription=formData.description.trim();const trimmedLocation=formData.location.trim();if(!trimmedTitle||formData.category==='Select issue category'||!trimmedDescription||!trimmedLocation||!selectedLocation){alert('Please fill in Issue Title, select a Category, fill Description, and confirm Location (using text input and selecting a location via GPS, map, or search).');return;}const assignedToDepartment=CATEGORY_TO_ASSIGNEDTO_MAP[formData.category];if(!assignedToDepartment){alert('Invalid issue category selected.');return;}setLoading(true);// 2. Prepare FormData for multipart/form-data upload\nconst submitData=new FormData();submitData.append('title',trimmedTitle);submitData.append('description',trimmedDescription);// --- FIX: Send complex data as JSON strings for backend explicit parsing ---\nconst addressArray=[trimmedLocation,formData.additionalAddress.trim()].filter(Boolean);// Send as a single JSON string\nsubmitData.append('address',JSON.stringify(addressArray));submitData.append('assignedTo',assignedToDepartment);// Send coordinates as a single JSON string array: [\"lng\", \"lat\"]\nsubmitData.append('locationCoords',JSON.stringify([selectedLocation.lng,selectedLocation.lat]));// Backend file field is 'complaintPhoto'\nif(formData.photo){submitData.append('complaintPhoto',formData.photo);}// 3. API Call to Backend\ntry{const response=await axios.post(\"\".concat(API_BASE_URL,\"/complaints/register\"),submitData,{withCredentials:true// Important for sending cookies (JWT)\n});console.log('Complaint Registration Success:',response.data);alert('Issue reported successfully! Our team will review it shortly.');navigate('/browse-issues');}catch(error){var _error$response,_error$response2,_error$response2$data;console.error('Complaint Submission Error:',((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);// Display a user-friendly error\nalert(\"Failed to submit report: \".concat(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Check your network or ensure your backend server is running correctly.'));}finally{setLoading(false);}};// ... (rest of the component JSX and functions remain the same)\nconst handleLogout=()=>{axios.post(\"\".concat(API_BASE_URL,\"/users/logout\"),{},{withCredentials:true}).catch(error=>console.error(\"Logout failed:\",error)).finally(()=>{signOut();navigate('/');});};const getUserInitials=name=>{if(!name)return'CS';const nameParts=name.split(' ');const initials=nameParts.map(part=>part[0]).join('');return initials.toUpperCase();};if(!user){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading user info...\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header-top\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"nav-links\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(Link,{to:\"/browse-issues\",children:\"Browse Issues\"}),/*#__PURE__*/_jsx(Link,{to:\"/report-issue\",className:\"active\",children:\"Report Issue\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-profile\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/profile\",className:\"profile-link\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-initials\",children:getUserInitials(user.name)}),/*#__PURE__*/_jsx(\"span\",{className:\"user-name\",children:user.name})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-btn-header\",children:/*#__PURE__*/_jsx(ArrowRight,{size:20})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-hero\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"hero-content-wrapper\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Report a Public Issue\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Help improve your community by reporting issues like potholes, broken streetlights, garbage, or water problems. Your voice makes a difference!\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-issue-main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"report-form-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Submit Your Report\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Provide detailed information to help authorities address the issue quickly and effectively.\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"report-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[/*#__PURE__*/_jsx(User,{size:16}),\"Reporter Name\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-with-description\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:user.name||'John Doe',className:\"form-input\",disabled:true}),/*#__PURE__*/_jsx(\"div\",{className:\"input-description\",children:\"Your name is automatically populated\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[/*#__PURE__*/_jsx(FileText,{size:16}),\"Issue Title *\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:formData.title,onChange:handleInputChange,placeholder:\"Brief, clear description of the issue\",className:\"form-input\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:16}),\"Issue Category *\"]}),/*#__PURE__*/_jsx(\"select\",{name:\"category\",value:formData.category,onChange:handleInputChange,className:\"form-select\",required:true,children:categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Description *\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:formData.description,onChange:handleInputChange,placeholder:\"Provide a detailed description of the issue. Include any relevant details that would help authorities understand and address the problem.\",className:\"form-textarea\",rows:\"4\",required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"input-hint\",children:\"The more details you provide, the better we can help!\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"section-title\",children:\"Location Details *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[/*#__PURE__*/_jsx(MapPin,{size:16}),\"Street address or landmark\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"location\",value:formData.location,onChange:handleInputChange,placeholder:\"Complete street address with zip code\",className:\"form-input\",required:true}),/*#__PURE__*/_jsx(\"div\",{className:\"input-hint\",children:\"Please provide the complete address including zip code for accurate routing\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"location-options\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"location-option-btn\",onClick:()=>setShowMapModal(true),children:[/*#__PURE__*/_jsx(Map,{size:16}),\"Select on Map\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"location-option-btn\",onClick:getCurrentLocation,disabled:mapLoading,children:[/*#__PURE__*/_jsx(Navigation,{size:16}),mapLoading?'Getting Location...':'Use GPS Location']})]}),selectedLocation&&/*#__PURE__*/_jsxs(\"div\",{className:\"location-status success\",children:[/*#__PURE__*/_jsx(MapPin,{size:14}),\"Location confirmed: \",selectedLocation.address,/*#__PURE__*/_jsxs(\"span\",{className:\"coords-text\",children:[\" (Lng: \",selectedLocation.lng.toFixed(4),\", Lat: \",selectedLocation.lat.toFixed(4),\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Additional Address Details\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"additionalAddress\",value:formData.additionalAddress,onChange:handleInputChange,placeholder:\"Apartment number, building name, or additional location details\",className:\"form-input\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Volunteer Assignment\"}),/*#__PURE__*/_jsx(\"select\",{name:\"volunteer\",value:formData.volunteer,onChange:handleInputChange,className:\"form-select\",children:volunteers.map(volunteer=>/*#__PURE__*/_jsx(\"option\",{value:volunteer,children:volunteer},volunteer))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-section\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"section-title\",children:\"Priority Level\"}),/*#__PURE__*/_jsx(\"div\",{className:\"priority-options\",children:priorityLevels.map(priority=>/*#__PURE__*/_jsxs(\"label\",{className:\"priority-option\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"priority\",value:priority.level,checked:formData.priority===priority.level,onChange:handleInputChange,className:\"priority-radio\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"priority-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"priority-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"priority-icon\",children:priority.color}),/*#__PURE__*/_jsx(\"span\",{className:\"priority-label\",children:priority.label})]}),/*#__PURE__*/_jsx(\"div\",{className:\"priority-description\",children:priority.description})]})]},priority.level))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[/*#__PURE__*/_jsx(Camera,{size:16}),\"Add Photo Evidence\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"photo-upload-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"photo-upload\",ref:fileInputRef,accept:\"image/jpeg,image/png,image/jpg\",onChange:handleFileChange,className:\"photo-input\"}),formData.photoPreview?/*#__PURE__*/_jsxs(\"div\",{className:\"photo-preview-active\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"preview-header\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Photo Preview\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"remove-photo-btn\",onClick:removePhoto,children:/*#__PURE__*/_jsx(X,{size:16})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"preview-image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:formData.photoPreview,alt:\"Preview\",className:\"preview-image\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"preview-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"file-name\",children:formData.photo.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"file-size\",children:[(formData.photo.size/1024/1024).toFixed(2),\" MB\"]})]})]}):/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"photo-upload\",className:\"photo-upload-label\",children:[/*#__PURE__*/_jsx(Camera,{size:32}),/*#__PURE__*/_jsxs(\"div\",{className:\"upload-text\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Choose Photo\"}),/*#__PURE__*/_jsx(\"span\",{children:\"JPG, PNG up to 10MB \\u2022 Photos help get faster responses\"})]})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-secondary\",onClick:()=>navigate('/browse-issues'),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",disabled:loading,children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner-small\"}),\"Submitting...\"]}):'Submit Report'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-sidebar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-panel\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCDD Reporting Tips\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"tips-list\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Be specific about the location\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Include clear, well-lit photos\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Describe safety concerns clearly\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Mention how long the issue has existed\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Provide accurate contact information\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-panel\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCCD Location Help\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"tips-list\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"GPS Location:\"}),\" Uses your device's location services\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Select on Map:\"}),\" Choose exact location on interactive map\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Manual Entry:\"}),\" Type full address with zip code\"]}),/*#__PURE__*/_jsx(\"li\",{children:\"Include landmarks for better accuracy\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-panel\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u23F1\\uFE0F What Happens Next?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"process-steps\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"process-step\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"step-number\",children:\"1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-content\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Report Submitted\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your issue is logged in our system\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"process-step\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"step-number\",children:\"2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-content\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Under Review\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Authorities assess the priority\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"process-step\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"step-number\",children:\"3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"step-content\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Action Taken\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Issue is assigned for resolution\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-panel\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCDE Need Help?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"contact-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Mail,{size:16}),\" \",/*#__PURE__*/_jsx(\"a\",{href:\"mailto:support@civiceye.org\",children:\"support@civiceye.org\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Phone,{size:16}),\" \",/*#__PURE__*/_jsx(\"a\",{href:\"tel:5551234567\",children:\"(555) 123-HELP\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Globe,{size:16}),\" \",/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:\"Live Chat Support\"})]})]})]})]})]})]}),showMapModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"map-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Select Location on Map\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-modal-btn\",onClick:()=>setShowMapModal(false),children:/*#__PURE__*/_jsx(X,{size:20})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"map-search-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar\",children:[/*#__PURE__*/_jsx(Search,{size:20,className:\"search-icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search for an address or place...\",value:searchQuery,onChange:e=>{setSearchQuery(e.target.value);searchLocations(e.target.value);},className:\"search-input\"}),isSearching&&/*#__PURE__*/_jsx(\"div\",{className:\"search-loading\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner-small\"})})]}),searchResults.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"search-results\",children:searchResults.map(result=>/*#__PURE__*/_jsxs(\"div\",{className:\"search-result-item\",onClick:()=>handleLocationSelect(result),children:[/*#__PURE__*/_jsx(MapPin,{size:16}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"result-main-text\",children:result.display_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"result-type\",children:[\"Type: \",result.type,\" \\u2022 \",result.class]})]})]},result.place_id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",children:/*#__PURE__*/_jsx(MapComponent,{onLocationSelect:handleMapLocationSelect,initialCenter:selectedLocation?{lat:selectedLocation.lat,lng:selectedLocation.lng}:null})}),/*#__PURE__*/_jsxs(\"div\",{className:\"map-instructions\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCA1 \",/*#__PURE__*/_jsx(\"strong\",{children:\"Click anywhere on the map\"}),\" to select the exact location of the issue\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDDFA\\uFE0F Powered by OpenStreetMap - Free and open-source mapping\"})]})]})]})}),/*#__PURE__*/_jsxs(\"footer\",{className:\"footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"footer-column footer-logo-section\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"footer-tagline\",children:\"Civic Engagement Platform\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Empowering communities to report, track, and resolve civic issues through collaborative engagement between citizens and local authorities.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-column\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Platform\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"How it Works\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Features\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Pricing\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Mobile App\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-column\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Support\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Help Center\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Contact Us\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"User Guide\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Community Forum\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-column\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Company\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"About Us\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Careers\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Press Kit\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Blog\"})})]})]})]})]});};export default UserReportIssue;","map":{"version":3,"names":["React","useState","useRef","useCallback","useMemo","Link","useNavigate","axios","useAuth","MapPin","Camera","AlertCircle","ArrowRight","User","FileText","Map","Navigation","Mail","Phone","Globe","X","Search","MapComponent","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CATEGORY_TO_ASSIGNEDTO_MAP","UserReportIssue","user","signOut","navigate","fileInputRef","formData","setFormData","title","category","description","location","additionalAddress","volunteer","priority","photo","photoPreview","loading","setLoading","showMapModal","setShowMapModal","selectedLocation","setSelectedLocation","mapLoading","setMapLoading","searchQuery","setSearchQuery","searchResults","setSearchResults","isSearching","setIsSearching","API_BASE_URL","categories","priorityLevels","level","label","color","volunteers","handleInputChange","e","name","value","target","prev","_objectSpread","handleFileChange","file","files","size","alert","type","startsWith","previewUrl","URL","createObjectURL","removePhoto","revokeObjectURL","current","reverseGeocode","lat","lng","response","fetch","concat","data","json","display_name","toFixed","getCurrentLocation","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","address","error","console","code","message","enableHighAccuracy","timeout","maximumAge","searchLocations","query","trim","encodeURIComponent","handleLocationSelect","result","parseFloat","lon","handleMapLocationSelect","fallbackAddress","handleSubmit","preventDefault","trimmedTitle","trimmedDescription","trimmedLocation","assignedToDepartment","submitData","FormData","append","addressArray","filter","Boolean","JSON","stringify","post","withCredentials","log","_error$response","_error$response2","_error$response2$data","handleLogout","catch","finally","getUserInitials","nameParts","split","initials","map","part","join","toUpperCase","children","className","to","onClick","onSubmit","disabled","onChange","placeholder","required","rows","checked","id","ref","accept","src","alt","htmlFor","href","length","class","place_id","onLocationSelect","initialCenter"],"sources":["C:/Users/saksh/OneDrive/Desktop/DS/civiceye/civiceye/frontend/src/pages/ReportIssuePage.js"],"sourcesContent":["import React, { useState, useRef, useCallback, useMemo } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { MapPin, Camera, AlertCircle, ArrowRight, User, FileText, Map, Navigation, Mail, Phone, Globe, X, Search } from 'lucide-react';\r\nimport MapComponent from './MapComponent'; // Assuming this component exists and works\r\nimport './ReportIssue.css'; // Assuming you have the corresponding CSS file\r\n\r\n// --- Configuration Mapping for Backend Integration ---\r\n\r\n// Map frontend categories to the backend's Complaint model 'assignedTo' enum\r\nconst CATEGORY_TO_ASSIGNEDTO_MAP = {\r\n    'Garbage & Waste': 'Municipal sanitation and public health',\r\n    'Potholes': 'Roads and street infrastructure',\r\n    'Street Lights': 'Street lighting and electrical assets',\r\n    'Water Issues': 'Water, sewerage, and stormwater',\r\n    'Vandalism': 'Ward/zone office and central admin', // A common fallback for public area issues\r\n    'Other': 'Ward/zone office and central admin'\r\n};\r\n\r\nconst UserReportIssue = () => {\r\n    const { user, signOut } = useAuth();\r\n    const navigate = useNavigate();\r\n    const fileInputRef = useRef(null);\r\n    const [formData, setFormData] = useState({\r\n        title: '',\r\n        category: 'Select issue category', // Maps to 'assignedTo' in backend\r\n        description: '',\r\n        location: '', // User-friendly address string\r\n        additionalAddress: '', // Maps to 'address' array in backend\r\n        volunteer: 'Select a volunteer (optional)', // Not used in backend model, remove or ignore\r\n        priority: 'medium', // Not used in backend model, remove or ignore\r\n        photo: null, // File object\r\n        photoPreview: null // URL for preview\r\n    });\r\n    const [loading, setLoading] = useState(false);\r\n    const [showMapModal, setShowMapModal] = useState(false);\r\n    const [selectedLocation, setSelectedLocation] = useState(null); // { lat, lng, address }\r\n    const [mapLoading, setMapLoading] = useState(false);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [searchResults, setSearchResults] = useState([]);\r\n    const [isSearching, setIsSearching] = useState(false);\r\n    const API_BASE_URL = 'http://localhost:3000/api/v1'; // Assuming default server config\r\n\r\n    const categories = useMemo(() => [\r\n        'Select issue category',\r\n        'Garbage & Waste',\r\n        'Potholes',\r\n        'Water Issues',\r\n        'Street Lights',\r\n        'Vandalism',\r\n        'Other'\r\n    ], []);\r\n\r\n    // Priorities and Volunteers are not directly mapped to the Complaint model but kept for frontend UX\r\n    const priorityLevels = useMemo(() => [\r\n        { level: 'low', label: 'Low Priority', description: 'Minor issue - expected response within 7-10 days', color: '游릭' },\r\n        { level: 'medium', label: 'Medium Priority', description: 'Moderate issue - expected response within 3-5 days', color: '游리' },\r\n        { level: 'high', label: 'High Priority', description: 'Urgent issue - expected response within 24-48 hours', color: '游댮' }\r\n    ], []);\r\n    \r\n    // Define volunteers separately to manage the optional field\r\n    const volunteers = useMemo(() => [\r\n        'Select a volunteer (optional)',\r\n        'Community Volunteer Group A',\r\n        'Neighborhood Watch Team',\r\n        'Local Cleanup Crew',\r\n        'Individual Volunteer'\r\n    ], []);\r\n\r\n\r\n    const handleInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: value\r\n        }));\r\n    };\r\n\r\n    const handleFileChange = (e) => {\r\n        const file = e.target.files[0];\r\n        if (file) {\r\n            if (file.size > 10 * 1024 * 1024) {\r\n                alert('File size must be less than 10MB');\r\n                return;\r\n            }\r\n\r\n            if (!file.type.startsWith('image/')) {\r\n                alert('Please select an image file (JPG, PNG)');\r\n                return;\r\n            }\r\n\r\n            const previewUrl = URL.createObjectURL(file);\r\n\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                photo: file,\r\n                photoPreview: previewUrl\r\n            }));\r\n        }\r\n    };\r\n\r\n    const removePhoto = () => {\r\n        if (formData.photoPreview) {\r\n            URL.revokeObjectURL(formData.photoPreview);\r\n        }\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            photo: null,\r\n            photoPreview: null\r\n        }));\r\n        if (fileInputRef.current) {\r\n            fileInputRef.current.value = '';\r\n        }\r\n    };\r\n\r\n    const reverseGeocode = async (lat, lng) => {\r\n        const response = await fetch(\r\n            `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&zoom=18&addressdetails=1`\r\n        );\r\n        const data = await response.json();\r\n        return data.display_name || `Lat: ${lat.toFixed(6)}, Lng: ${lng.toFixed(6)}`;\r\n    }\r\n\r\n    const getCurrentLocation = useCallback(() => {\r\n        setMapLoading(true);\r\n\r\n        if (!navigator.geolocation) {\r\n            alert('Geolocation is not supported by your browser');\r\n            setMapLoading(false);\r\n            return;\r\n        }\r\n\r\n        navigator.geolocation.getCurrentPosition(\r\n            async (position) => {\r\n                const { latitude, longitude } = position.coords;\r\n\r\n                try {\r\n                    const address = await reverseGeocode(latitude, longitude);\r\n\r\n                    setFormData(prev => ({\r\n                        ...prev,\r\n                        location: address\r\n                    }));\r\n\r\n                    setSelectedLocation({\r\n                        lat: latitude,\r\n                        lng: longitude,\r\n                        address: address\r\n                    });\r\n\r\n                    alert(`Location set to: ${address}`);\r\n                } catch (error) {\r\n                    console.error('Error getting address:', error);\r\n                    alert('Error getting address for location. Coordinates saved.');\r\n                } finally {\r\n                    setMapLoading(false);\r\n                }\r\n            },\r\n            (error) => {\r\n                console.error('Error getting location:', error);\r\n                setMapLoading(false);\r\n                alert(`Location error (${error.code}): ${error.message}. Please select on map or enter manually.`);\r\n            },\r\n            { enableHighAccuracy: true, timeout: 15000, maximumAge: 60000 }\r\n        );\r\n    }, []);\r\n\r\n    const searchLocations = useCallback(async (query) => {\r\n        if (!query.trim()) {\r\n            setSearchResults([]);\r\n            return;\r\n        }\r\n\r\n        setIsSearching(true);\r\n        try {\r\n            const response = await fetch(\r\n                `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}&limit=5&addressdetails=1`\r\n            );\r\n            const data = await response.json();\r\n\r\n            setSearchResults(data);\r\n        } catch (error) {\r\n            console.error('Error searching locations:', error);\r\n            alert('Error searching for locations. Please try again.');\r\n        } finally {\r\n            setIsSearching(false);\r\n        }\r\n    }, []);\r\n\r\n    const handleLocationSelect = useCallback((result) => {\r\n        const address = result.display_name;\r\n        const lat = parseFloat(result.lat);\r\n        const lng = parseFloat(result.lon);\r\n\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            location: address\r\n        }));\r\n\r\n        setSelectedLocation({\r\n            lat: lat,\r\n            lng: lng,\r\n            address: address\r\n        });\r\n\r\n        setSearchQuery('');\r\n        setSearchResults([]);\r\n        setShowMapModal(false);\r\n\r\n        alert(`Location set to: ${address}`);\r\n    }, []);\r\n\r\n    const handleMapLocationSelect = useCallback(async (lat, lng) => {\r\n        try {\r\n            const address = await reverseGeocode(lat, lng);\r\n\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                location: address\r\n            }));\r\n\r\n            setSelectedLocation({\r\n                lat: lat,\r\n                lng: lng,\r\n                address: address\r\n            });\r\n\r\n            setShowMapModal(false);\r\n            alert(`Location set to: ${address}`);\r\n        } catch (error) {\r\n            console.error('Error reverse geocoding:', error);\r\n            const fallbackAddress = `Lat: ${lat.toFixed(6)}, Lng: ${lng.toFixed(6)}`;\r\n            setFormData(prev => ({\r\n                ...prev,\r\n                location: fallbackAddress\r\n            }));\r\n            setShowMapModal(false);\r\n            alert(`Location set to coordinates: ${fallbackAddress}`);\r\n        }\r\n    }, []);\r\n\r\n    // --- Submission Logic Integration ---\r\n // ... (lines 1-136, including all imports and state initialization, remain the same)\r\n\r\n// --- Submission Logic Integration ---\r\nconst handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    // 1. Frontend Validation\r\n    const trimmedTitle = formData.title.trim();\r\n    const trimmedDescription = formData.description.trim();\r\n    const trimmedLocation = formData.location.trim();\r\n    \r\n    if (!trimmedTitle || formData.category === 'Select issue category' || !trimmedDescription || !trimmedLocation || !selectedLocation) {\r\n        alert('Please fill in Issue Title, select a Category, fill Description, and confirm Location (using text input and selecting a location via GPS, map, or search).');\r\n        return;\r\n    }\r\n\r\n    const assignedToDepartment = CATEGORY_TO_ASSIGNEDTO_MAP[formData.category];\r\n    if (!assignedToDepartment) {\r\n        alert('Invalid issue category selected.');\r\n        return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    // 2. Prepare FormData for multipart/form-data upload\r\n    const submitData = new FormData();\r\n    submitData.append('title', trimmedTitle);\r\n    submitData.append('description', trimmedDescription);\r\n\r\n    // --- FIX: Send complex data as JSON strings for backend explicit parsing ---\r\n    \r\n    const addressArray = [trimmedLocation, formData.additionalAddress.trim()].filter(Boolean);\r\n    // Send as a single JSON string\r\n    submitData.append('address', JSON.stringify(addressArray)); \r\n\r\n    submitData.append('assignedTo', assignedToDepartment);\r\n\r\n    // Send coordinates as a single JSON string array: [\"lng\", \"lat\"]\r\n    submitData.append('locationCoords', JSON.stringify([selectedLocation.lng, selectedLocation.lat]));\r\n\r\n    // Backend file field is 'complaintPhoto'\r\n    if (formData.photo) {\r\n        submitData.append('complaintPhoto', formData.photo);\r\n    }\r\n\r\n    // 3. API Call to Backend\r\n    try {\r\n        const response = await axios.post(\r\n            `${API_BASE_URL}/complaints/register`, \r\n            submitData, \r\n            {\r\n                withCredentials: true // Important for sending cookies (JWT)\r\n            }\r\n        );\r\n\r\n        console.log('Complaint Registration Success:', response.data);\r\n        alert('Issue reported successfully! Our team will review it shortly.');\r\n        navigate('/browse-issues');\r\n\r\n    } catch (error) {\r\n        console.error('Complaint Submission Error:', error.response?.data || error.message);\r\n        // Display a user-friendly error\r\n        alert(`Failed to submit report: ${error.response?.data?.message || 'Check your network or ensure your backend server is running correctly.'}`);\r\n    } finally {\r\n        setLoading(false);\r\n    }\r\n};\r\n// ... (rest of the component JSX and functions remain the same)\r\n\r\n    const handleLogout = () => {\r\n        axios.post(`${API_BASE_URL}/users/logout`, {}, { withCredentials: true })\r\n            .catch((error) => console.error(\"Logout failed:\", error))\r\n            .finally(() => {\r\n                signOut();\r\n                navigate('/');\r\n            });\r\n    };\r\n\r\n    const getUserInitials = (name) => {\r\n        if (!name) return 'CS';\r\n        const nameParts = name.split(' ');\r\n        const initials = nameParts.map(part => part[0]).join('');\r\n        return initials.toUpperCase();\r\n    };\r\n\r\n    if (!user) {\r\n        return <div>Loading user info...</div>;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <header className=\"header-top\">\r\n               \r\n                <nav className=\"nav-links\">\r\n                    <Link to=\"/dashboard\">Dashboard</Link>\r\n                    <Link to=\"/browse-issues\">Browse Issues</Link>\r\n                    <Link to=\"/report-issue\" className=\"active\">Report Issue</Link>\r\n                </nav>\r\n                <div className=\"user-profile\">\r\n                    <Link to=\"/profile\" className=\"profile-link\">\r\n                        <div className=\"user-initials\">{getUserInitials(user.name)}</div>\r\n                        <span className=\"user-name\">{user.name}</span>\r\n                    </Link>\r\n                    <button onClick={handleLogout} className=\"logout-btn-header\">\r\n                        <ArrowRight size={20} />\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            <div className=\"dashboard-container\">\r\n                {/* Hero Section */}\r\n                <div className=\"dashboard-hero\">\r\n                    <div className=\"hero-content-wrapper\">\r\n                        <h2>Report a Public Issue</h2>\r\n                        <p>Help improve your community by reporting issues like potholes, broken streetlights, garbage, or water problems. Your voice makes a difference!</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Main Content */}\r\n                <div className=\"report-issue-main\">\r\n                    <div className=\"report-form-container\">\r\n                        <div className=\"form-header\">\r\n                            <h3>Submit Your Report</h3>\r\n                            <p>Provide detailed information to help authorities address the issue quickly and effectively.</p>\r\n                        </div>\r\n\r\n                        <form onSubmit={handleSubmit} className=\"report-form\">\r\n                            {/* Reporter Info */}\r\n                            <div className=\"form-section\">\r\n                                <div className=\"form-group\">\r\n                                    <label className=\"form-label\">\r\n                                        <User size={16} />\r\n                                        Reporter Name\r\n                                    </label>\r\n                                    <div className=\"input-with-description\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={user.name || 'John Doe'}\r\n                                            className=\"form-input\"\r\n                                            disabled\r\n                                        />\r\n                                        <div className=\"input-description\">\r\n                                            Your name is automatically populated\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Issue Basic Info */}\r\n                            <div className=\"form-section\">\r\n                                <div className=\"form-group\">\r\n                                    <label className=\"form-label\">\r\n                                        <FileText size={16} />\r\n                                        Issue Title *\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"title\"\r\n                                        value={formData.title}\r\n                                        onChange={handleInputChange}\r\n                                        placeholder=\"Brief, clear description of the issue\"\r\n                                        className=\"form-input\"\r\n                                        required\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"form-group\">\r\n                                    <label className=\"form-label\">\r\n                                        <AlertCircle size={16} />\r\n                                        Issue Category *\r\n                                    </label>\r\n                                    <select\r\n                                        name=\"category\"\r\n                                        value={formData.category}\r\n                                        onChange={handleInputChange}\r\n                                        className=\"form-select\"\r\n                                        required\r\n                                    >\r\n                                        {categories.map(category => (\r\n                                            <option key={category} value={category}>\r\n                                                {category}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <div className=\"form-group\">\r\n                                    <label className=\"form-label\">\r\n                                        Description *\r\n                                    </label>\r\n                                    <textarea\r\n                                        name=\"description\"\r\n                                        value={formData.description}\r\n                                        onChange={handleInputChange}\r\n                                        placeholder=\"Provide a detailed description of the issue. Include any relevant details that would help authorities understand and address the problem.\"\r\n                                        className=\"form-textarea\"\r\n                                        rows=\"4\"\r\n                                        required\r\n                                    />\r\n                                    <div className=\"input-hint\">\r\n                                        The more details you provide, the better we can help!\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Location Section */}\r\n                            <div className=\"form-section\">\r\n                                <h4 className=\"section-title\">Location Details *</h4>\r\n\r\n                                <div className=\"form-group\">\r\n                                    <label className=\"form-label\">\r\n                                        <MapPin size={16} />\r\n                                        Street address or landmark\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"location\"\r\n                                        value={formData.location}\r\n                                        onChange={handleInputChange}\r\n                                        placeholder=\"Complete street address with zip code\"\r\n                                        className=\"form-input\"\r\n                                        required\r\n                                    />\r\n                                    <div className=\"input-hint\">\r\n                                        Please provide the complete address including zip code for accurate routing\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"location-options\">\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        className=\"location-option-btn\"\r\n                                        onClick={() => setShowMapModal(true)}\r\n                                    >\r\n                                        <Map size={16} />\r\n                                        Select on Map\r\n                                    </button>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        className=\"location-option-btn\"\r\n                                        onClick={getCurrentLocation}\r\n                                        disabled={mapLoading}\r\n                                    >\r\n                                        <Navigation size={16} />\r\n                                        {mapLoading ? 'Getting Location...' : 'Use GPS Location'}\r\n                                    </button>\r\n                                </div>\r\n\r\n                                {selectedLocation && (\r\n                                    <div className=\"location-status success\">\r\n                                        <MapPin size={14} />\r\n                                        Location confirmed: {selectedLocation.address}\r\n                                        <span className='coords-text'> (Lng: {selectedLocation.lng.toFixed(4)}, Lat: {selectedLocation.lat.toFixed(4)})</span>\r\n                                    </div>\r\n                                )}\r\n\r\n                                <div className=\"form-group\">\r\n                                    <label className=\"form-label\">\r\n                                        Additional Address Details\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        name=\"additionalAddress\"\r\n                                        value={formData.additionalAddress}\r\n                                        onChange={handleInputChange}\r\n                                        placeholder=\"Apartment number, building name, or additional location details\"\r\n                                        className=\"form-input\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Volunteer Assignment (Optional Field) */}\r\n                            <div className=\"form-section\">\r\n                                <div className=\"form-group\">\r\n                                    <label className=\"form-label\">\r\n                                        Volunteer Assignment\r\n                                    </label>\r\n                                    <select\r\n                                        name=\"volunteer\"\r\n                                        value={formData.volunteer}\r\n                                        onChange={handleInputChange}\r\n                                        className=\"form-select\"\r\n                                    >\r\n                                        {volunteers.map(volunteer => (\r\n                                            <option key={volunteer} value={volunteer}>\r\n                                                {volunteer}\r\n                                            </option>\r\n                                        ))}\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Priority Section (Optional Field) */}\r\n                            <div className=\"form-section\">\r\n                                <h4 className=\"section-title\">Priority Level</h4>\r\n                                <div className=\"priority-options\">\r\n                                    {priorityLevels.map(priority => (\r\n                                        <label key={priority.level} className=\"priority-option\">\r\n                                            <input\r\n                                                type=\"radio\"\r\n                                                name=\"priority\"\r\n                                                value={priority.level}\r\n                                                checked={formData.priority === priority.level}\r\n                                                onChange={handleInputChange}\r\n                                                className=\"priority-radio\"\r\n                                            />\r\n                                            <div className=\"priority-content\">\r\n                                                <div className=\"priority-header\">\r\n                                                    <span className=\"priority-icon\">{priority.color}</span>\r\n                                                    <span className=\"priority-label\">{priority.label}</span>\r\n                                                </div>\r\n                                                <div className=\"priority-description\">\r\n                                                    {priority.description}\r\n                                                </div>\r\n                                            </div>\r\n                                        </label>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Photo Upload */}\r\n                            <div className=\"form-section\">\r\n                                <div className=\"form-group\">\r\n                                    <label className=\"form-label\">\r\n                                        <Camera size={16} />\r\n                                        Add Photo Evidence\r\n                                    </label>\r\n                                    <div className=\"photo-upload-container\">\r\n                                        <input\r\n                                            type=\"file\"\r\n                                            id=\"photo-upload\"\r\n                                            ref={fileInputRef}\r\n                                            accept=\"image/jpeg,image/png,image/jpg\"\r\n                                            onChange={handleFileChange}\r\n                                            className=\"photo-input\"\r\n                                        />\r\n\r\n                                        {formData.photoPreview ? (\r\n                                            <div className=\"photo-preview-active\">\r\n                                                <div className=\"preview-header\">\r\n                                                    <span>Photo Preview</span>\r\n                                                    <button\r\n                                                        type=\"button\"\r\n                                                        className=\"remove-photo-btn\"\r\n                                                        onClick={removePhoto}\r\n                                                    >\r\n                                                        <X size={16} />\r\n                                                    </button>\r\n                                                </div>\r\n                                                <div className=\"preview-image-container\">\r\n                                                    <img\r\n                                                        src={formData.photoPreview}\r\n                                                        alt=\"Preview\"\r\n                                                        className=\"preview-image\"\r\n                                                    />\r\n                                                </div>\r\n                                                <div className=\"preview-info\">\r\n                                                    <span className=\"file-name\">{formData.photo.name}</span>\r\n                                                    <span className=\"file-size\">\r\n                                                        {(formData.photo.size / 1024 / 1024).toFixed(2)} MB\r\n                                                    </span>\r\n                                                </div>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <label htmlFor=\"photo-upload\" className=\"photo-upload-label\">\r\n                                                <Camera size={32} />\r\n                                                <div className=\"upload-text\">\r\n                                                    <strong>Choose Photo</strong>\r\n                                                    <span>JPG, PNG up to 10MB  Photos help get faster responses</span>\r\n                                                </div>\r\n                                            </label>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Submit Button */}\r\n                            <div className=\"form-actions\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"btn-secondary\"\r\n                                    onClick={() => navigate('/browse-issues')}\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"btn-primary\"\r\n                                    disabled={loading}\r\n                                >\r\n                                    {loading ? (\r\n                                        <>\r\n                                            <div className=\"loading-spinner-small\"></div>\r\n                                            Submitting...\r\n                                        </>\r\n                                    ) : (\r\n                                        'Submit Report'\r\n                                    )}\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n\r\n                    {/* Sidebar with Tips (Unchanged) */}\r\n                    <div className=\"report-sidebar\">\r\n                        <div className=\"sidebar-panel\">\r\n                            <h4>游닇 Reporting Tips</h4>\r\n                            <ul className=\"tips-list\">\r\n                                <li>Be specific about the location</li>\r\n                                <li>Include clear, well-lit photos</li>\r\n                                <li>Describe safety concerns clearly</li>\r\n                                <li>Mention how long the issue has existed</li>\r\n                                <li>Provide accurate contact information</li>\r\n                            </ul>\r\n                        </div>\r\n\r\n                        <div className=\"sidebar-panel\">\r\n                            <h4>游늸 Location Help</h4>\r\n                            <ul className=\"tips-list\">\r\n                                <li><strong>GPS Location:</strong> Uses your device's location services</li>\r\n                                <li><strong>Select on Map:</strong> Choose exact location on interactive map</li>\r\n                                <li><strong>Manual Entry:</strong> Type full address with zip code</li>\r\n                                <li>Include landmarks for better accuracy</li>\r\n                            </ul>\r\n                        </div>\r\n\r\n                        <div className=\"sidebar-panel\">\r\n                            <h4>낌勇 What Happens Next?</h4>\r\n                            <div className=\"process-steps\">\r\n                                <div className=\"process-step\">\r\n                                    <span className=\"step-number\">1</span>\r\n                                    <div className=\"step-content\">\r\n                                        <strong>Report Submitted</strong>\r\n                                        <p>Your issue is logged in our system</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"process-step\">\r\n                                    <span className=\"step-number\">2</span>\r\n                                    <div className=\"step-content\">\r\n                                        <strong>Under Review</strong>\r\n                                        <p>Authorities assess the priority</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"process-step\">\r\n                                    <span className=\"step-number\">3</span>\r\n                                    <div className=\"step-content\">\r\n                                        <strong>Action Taken</strong>\r\n                                        <p>Issue is assigned for resolution</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"sidebar-panel\">\r\n                            <h4>游 Need Help?</h4>\r\n                            <div className=\"contact-info\">\r\n                                <p><Mail size={16} /> <a href=\"mailto:support@civiceye.org\">support@civiceye.org</a></p>\r\n                                <p><Phone size={16} /> <a href=\"tel:5551234567\">(555) 123-HELP</a></p>\r\n                                <p><Globe size={16} /> <a href=\"#\">Live Chat Support</a></p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Map Modal */}\r\n            {showMapModal && (\r\n                <div className=\"modal-overlay\">\r\n                    <div className=\"map-modal\">\r\n                        <div className=\"modal-header\">\r\n                            <h3>Select Location on Map</h3>\r\n                            <button\r\n                                className=\"close-modal-btn\"\r\n                                onClick={() => setShowMapModal(false)}\r\n                            >\r\n                                <X size={20} />\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"modal-content\">\r\n                            {/* Search Bar */}\r\n                            <div className=\"map-search-container\">\r\n                                <div className=\"search-bar\">\r\n                                    <Search size={20} className=\"search-icon\" />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"Search for an address or place...\"\r\n                                        value={searchQuery}\r\n                                        onChange={(e) => {\r\n                                            setSearchQuery(e.target.value);\r\n                                            searchLocations(e.target.value);\r\n                                        }}\r\n                                        className=\"search-input\"\r\n                                    />\r\n                                    {isSearching && (\r\n                                        <div className=\"search-loading\">\r\n                                            <div className=\"loading-spinner-small\"></div>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n\r\n                                {/* Search Results */}\r\n                                {searchResults.length > 0 && (\r\n                                    <div className=\"search-results\">\r\n                                        {searchResults.map((result) => (\r\n                                            <div\r\n                                                key={result.place_id}\r\n                                                className=\"search-result-item\"\r\n                                                onClick={() => handleLocationSelect(result)}\r\n                                            >\r\n                                                <MapPin size={16} />\r\n                                                <div className=\"result-details\">\r\n                                                    <div className=\"result-main-text\">{result.display_name}</div>\r\n                                                    <div className=\"result-type\">\r\n                                                        Type: {result.type}  {result.class}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Interactive Map */}\r\n                            <div className=\"map-container\">\r\n                                <MapComponent\r\n                                    onLocationSelect={handleMapLocationSelect}\r\n                                    initialCenter={selectedLocation ? { lat: selectedLocation.lat, lng: selectedLocation.lng } : null}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"map-instructions\">\r\n                                <p>游눠 <strong>Click anywhere on the map</strong> to select the exact location of the issue</p>\r\n                                <p>游딬勇 Powered by OpenStreetMap - Free and open-source mapping</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <footer className=\"footer\">\r\n                <div className=\"footer-column footer-logo-section\">\r\n                    \r\n                    <p className=\"footer-tagline\">Civic Engagement Platform</p>\r\n                    <p>Empowering communities to report, track, and resolve civic issues through collaborative engagement between citizens and local authorities.</p>\r\n                </div>\r\n                <div className=\"footer-column\">\r\n                    <h4>Platform</h4>\r\n                    <ul>\r\n                        <li><a href=\"/\">How it Works</a></li>\r\n                        <li><a href=\"/\">Features</a></li>\r\n                        <li><a href=\"/\">Pricing</a></li>\r\n                        <li><a href=\"/\">Mobile App</a></li>\r\n                    </ul>\r\n                </div>\r\n                <div className=\"footer-column\">\r\n                    <h4>Support</h4>\r\n                    <ul>\r\n                        <li><a href=\"/\">Help Center</a></li>\r\n                        <li><a href=\"/\">Contact Us</a></li>\r\n                        <li><a href=\"/\">User Guide</a></li>\r\n                        <li><a href=\"/\">Community Forum</a></li>\r\n                    </ul>\r\n                </div>\r\n                <div className=\"footer-column\">\r\n                    <h4>Company</h4>\r\n                    <ul>\r\n                        <li><a href=\"/\">About Us</a></li>\r\n                        <li><a href=\"/\">Careers</a></li>\r\n                        <li><a href=\"/\">Press Kit</a></li>\r\n                        <li><a href=\"/\">Blog</a></li>\r\n                    </ul>\r\n                </div>\r\n            </footer>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default UserReportIssue;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}