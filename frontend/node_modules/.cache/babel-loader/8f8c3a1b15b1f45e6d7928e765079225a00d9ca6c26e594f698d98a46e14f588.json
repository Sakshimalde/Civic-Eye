{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\saksh\\\\OneDrive\\\\Desktop\\\\DS\\\\civiceye\\\\civiceye\\\\frontend\\\\src\\\\pages\\\\MapComponent.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\n\n// Fix for default markers in Leaflet with Webpack\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png'\n});\nconst MapComponent = ({\n  onLocationSelect,\n  initialCenter\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const [map, setMap] = useState(null);\n  const [marker, setMarker] = useState(null);\n\n  // Default center (New York)\n  const defaultCenter = [40.7128, -74.0060];\n  useEffect(() => {\n    // Initialize map\n    const leafletMap = L.map(mapRef.current).setView(initialCenter ? [initialCenter.lat, initialCenter.lng] : defaultCenter, 13);\n\n    // Add OpenStreetMap tiles\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n      maxZoom: 19\n    }).addTo(leafletMap);\n\n    // Add click event listener\n    leafletMap.on('click', e => {\n      const {\n        lat,\n        lng\n      } = e.latlng;\n\n      // Remove existing marker\n      if (marker) {\n        leafletMap.removeLayer(marker);\n      }\n\n      // Add new marker\n      const newMarker = L.marker([lat, lng], {\n        draggable: true\n      }).addTo(leafletMap);\n\n      // Bind popup to marker\n      newMarker.bindPopup('Selected Location<br>Drag to adjust').openPopup();\n      setMarker(newMarker);\n\n      // Call the callback with coordinates\n      if (onLocationSelect) {\n        onLocationSelect(lat, lng);\n      }\n\n      // Add drag end listener\n      newMarker.on('dragend', dragEvent => {\n        const newPosition = dragEvent.target.getLatLng();\n        const newLat = newPosition.lat;\n        const newLng = newPosition.lng;\n\n        // Update popup content\n        newMarker.setPopupContent('Selected Location (Adjusted)<br>Drag to adjust');\n        if (onLocationSelect) {\n          onLocationSelect(newLat, newLng);\n        }\n      });\n    });\n\n    // If initial center is provided, add a marker\n    if (initialCenter) {\n      const initialMarker = L.marker([initialCenter.lat, initialCenter.lng], {\n        draggable: true\n      }).addTo(leafletMap);\n      initialMarker.bindPopup('Current Location<br>Drag to adjust').openPopup();\n      setMarker(initialMarker);\n\n      // Add drag end listener for initial marker\n      initialMarker.on('dragend', dragEvent => {\n        const newPosition = dragEvent.target.getLatLng();\n        const newLat = newPosition.lat;\n        const newLng = newPosition.lng;\n        initialMarker.setPopupContent('Selected Location (Adjusted)<br>Drag to adjust');\n        if (onLocationSelect) {\n          onLocationSelect(newLat, newLng);\n        }\n      });\n    }\n    setMap(leafletMap);\n\n    // Cleanup function\n    return () => {\n      if (leafletMap) {\n        leafletMap.remove();\n      }\n    };\n  }, [onLocationSelect, initialCenter]);\n\n  // Effect to update map center when initialCenter changes\n  useEffect(() => {\n    if (map && initialCenter) {\n      map.setView([initialCenter.lat, initialCenter.lng], 13);\n    }\n  }, [map, initialCenter]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: mapRef,\n    style: {\n      width: '100%',\n      height: '400px',\n      borderRadius: '8px',\n      border: '2px solid #e2e8f0'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 9\n  }, this);\n};\n_s(MapComponent, \"ij9EvDz+tZLJp9F85qIYh/ZEiE0=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","useState","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","MapComponent","onLocationSelect","initialCenter","_s","mapRef","map","setMap","marker","setMarker","defaultCenter","leafletMap","current","setView","lat","lng","tileLayer","attribution","maxZoom","addTo","on","e","latlng","removeLayer","newMarker","draggable","bindPopup","openPopup","dragEvent","newPosition","target","getLatLng","newLat","newLng","setPopupContent","initialMarker","remove","ref","style","width","height","borderRadius","border","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/saksh/OneDrive/Desktop/DS/civiceye/civiceye/frontend/src/pages/MapComponent.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\n// Fix for default markers in Leaflet with Webpack\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\r\n  iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\r\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n});\r\n\r\nconst MapComponent = ({ onLocationSelect, initialCenter }) => {\r\n    const mapRef = useRef(null);\r\n    const [map, setMap] = useState(null);\r\n    const [marker, setMarker] = useState(null);\r\n\r\n    // Default center (New York)\r\n    const defaultCenter = [40.7128, -74.0060];\r\n\r\n    useEffect(() => {\r\n        // Initialize map\r\n        const leafletMap = L.map(mapRef.current).setView(\r\n            initialCenter ? [initialCenter.lat, initialCenter.lng] : defaultCenter,\r\n            13\r\n        );\r\n\r\n        // Add OpenStreetMap tiles\r\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\r\n            maxZoom: 19,\r\n        }).addTo(leafletMap);\r\n\r\n        // Add click event listener\r\n        leafletMap.on('click', (e) => {\r\n            const { lat, lng } = e.latlng;\r\n\r\n            // Remove existing marker\r\n            if (marker) {\r\n                leafletMap.removeLayer(marker);\r\n            }\r\n\r\n            // Add new marker\r\n            const newMarker = L.marker([lat, lng], {\r\n                draggable: true,\r\n            }).addTo(leafletMap);\r\n\r\n            // Bind popup to marker\r\n            newMarker.bindPopup('Selected Location<br>Drag to adjust').openPopup();\r\n\r\n            setMarker(newMarker);\r\n\r\n            // Call the callback with coordinates\r\n            if (onLocationSelect) {\r\n                onLocationSelect(lat, lng);\r\n            }\r\n\r\n            // Add drag end listener\r\n            newMarker.on('dragend', (dragEvent) => {\r\n                const newPosition = dragEvent.target.getLatLng();\r\n                const newLat = newPosition.lat;\r\n                const newLng = newPosition.lng;\r\n                \r\n                // Update popup content\r\n                newMarker.setPopupContent('Selected Location (Adjusted)<br>Drag to adjust');\r\n                \r\n                if (onLocationSelect) {\r\n                    onLocationSelect(newLat, newLng);\r\n                }\r\n            });\r\n        });\r\n\r\n        // If initial center is provided, add a marker\r\n        if (initialCenter) {\r\n            const initialMarker = L.marker([initialCenter.lat, initialCenter.lng], {\r\n                draggable: true,\r\n            }).addTo(leafletMap);\r\n            \r\n            initialMarker.bindPopup('Current Location<br>Drag to adjust').openPopup();\r\n            setMarker(initialMarker);\r\n\r\n            // Add drag end listener for initial marker\r\n            initialMarker.on('dragend', (dragEvent) => {\r\n                const newPosition = dragEvent.target.getLatLng();\r\n                const newLat = newPosition.lat;\r\n                const newLng = newPosition.lng;\r\n                \r\n                initialMarker.setPopupContent('Selected Location (Adjusted)<br>Drag to adjust');\r\n                \r\n                if (onLocationSelect) {\r\n                    onLocationSelect(newLat, newLng);\r\n                }\r\n            });\r\n        }\r\n\r\n        setMap(leafletMap);\r\n\r\n        // Cleanup function\r\n        return () => {\r\n            if (leafletMap) {\r\n                leafletMap.remove();\r\n            }\r\n        };\r\n    }, [onLocationSelect, initialCenter]);\r\n\r\n    // Effect to update map center when initialCenter changes\r\n    useEffect(() => {\r\n        if (map && initialCenter) {\r\n            map.setView([initialCenter.lat, initialCenter.lng], 13);\r\n        }\r\n    }, [map, initialCenter]);\r\n\r\n    return (\r\n        <div \r\n            ref={mapRef} \r\n            style={{ \r\n                width: '100%', \r\n                height: '400px', \r\n                borderRadius: '8px',\r\n                border: '2px solid #e2e8f0'\r\n            }} \r\n        />\r\n    );\r\n};\r\n\r\nexport default MapComponent;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAOC,CAAC,MAAM,SAAS;AACvB,OAAO,0BAA0B;;AAEjC;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,OAAOF,CAAC,CAACG,IAAI,CAACC,OAAO,CAACC,SAAS,CAACC,WAAW;AAC3CN,CAAC,CAACG,IAAI,CAACC,OAAO,CAACG,YAAY,CAAC;EAC1BC,aAAa,EAAE,gFAAgF;EAC/FC,OAAO,EAAE,6EAA6E;EACtFC,SAAS,EAAE;AACb,CAAC,CAAC;AAEF,MAAMC,YAAY,GAAGA,CAAC;EAAEC,gBAAgB;EAAEC;AAAc,CAAC,KAAK;EAAAC,EAAA;EAC1D,MAAMC,MAAM,GAAGjB,MAAM,CAAC,IAAI,CAAC;EAC3B,MAAM,CAACkB,GAAG,EAAEC,MAAM,CAAC,GAAGlB,QAAQ,CAAC,IAAI,CAAC;EACpC,MAAM,CAACmB,MAAM,EAAEC,SAAS,CAAC,GAAGpB,QAAQ,CAAC,IAAI,CAAC;;EAE1C;EACA,MAAMqB,aAAa,GAAG,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC;EAEzCvB,SAAS,CAAC,MAAM;IACZ;IACA,MAAMwB,UAAU,GAAGrB,CAAC,CAACgB,GAAG,CAACD,MAAM,CAACO,OAAO,CAAC,CAACC,OAAO,CAC5CV,aAAa,GAAG,CAACA,aAAa,CAACW,GAAG,EAAEX,aAAa,CAACY,GAAG,CAAC,GAAGL,aAAa,EACtE,EACJ,CAAC;;IAED;IACApB,CAAC,CAAC0B,SAAS,CAAC,oDAAoD,EAAE;MAC9DC,WAAW,EAAE,yFAAyF;MACtGC,OAAO,EAAE;IACb,CAAC,CAAC,CAACC,KAAK,CAACR,UAAU,CAAC;;IAEpB;IACAA,UAAU,CAACS,EAAE,CAAC,OAAO,EAAGC,CAAC,IAAK;MAC1B,MAAM;QAAEP,GAAG;QAAEC;MAAI,CAAC,GAAGM,CAAC,CAACC,MAAM;;MAE7B;MACA,IAAId,MAAM,EAAE;QACRG,UAAU,CAACY,WAAW,CAACf,MAAM,CAAC;MAClC;;MAEA;MACA,MAAMgB,SAAS,GAAGlC,CAAC,CAACkB,MAAM,CAAC,CAACM,GAAG,EAAEC,GAAG,CAAC,EAAE;QACnCU,SAAS,EAAE;MACf,CAAC,CAAC,CAACN,KAAK,CAACR,UAAU,CAAC;;MAEpB;MACAa,SAAS,CAACE,SAAS,CAAC,qCAAqC,CAAC,CAACC,SAAS,CAAC,CAAC;MAEtElB,SAAS,CAACe,SAAS,CAAC;;MAEpB;MACA,IAAItB,gBAAgB,EAAE;QAClBA,gBAAgB,CAACY,GAAG,EAAEC,GAAG,CAAC;MAC9B;;MAEA;MACAS,SAAS,CAACJ,EAAE,CAAC,SAAS,EAAGQ,SAAS,IAAK;QACnC,MAAMC,WAAW,GAAGD,SAAS,CAACE,MAAM,CAACC,SAAS,CAAC,CAAC;QAChD,MAAMC,MAAM,GAAGH,WAAW,CAACf,GAAG;QAC9B,MAAMmB,MAAM,GAAGJ,WAAW,CAACd,GAAG;;QAE9B;QACAS,SAAS,CAACU,eAAe,CAAC,gDAAgD,CAAC;QAE3E,IAAIhC,gBAAgB,EAAE;UAClBA,gBAAgB,CAAC8B,MAAM,EAAEC,MAAM,CAAC;QACpC;MACJ,CAAC,CAAC;IACN,CAAC,CAAC;;IAEF;IACA,IAAI9B,aAAa,EAAE;MACf,MAAMgC,aAAa,GAAG7C,CAAC,CAACkB,MAAM,CAAC,CAACL,aAAa,CAACW,GAAG,EAAEX,aAAa,CAACY,GAAG,CAAC,EAAE;QACnEU,SAAS,EAAE;MACf,CAAC,CAAC,CAACN,KAAK,CAACR,UAAU,CAAC;MAEpBwB,aAAa,CAACT,SAAS,CAAC,oCAAoC,CAAC,CAACC,SAAS,CAAC,CAAC;MACzElB,SAAS,CAAC0B,aAAa,CAAC;;MAExB;MACAA,aAAa,CAACf,EAAE,CAAC,SAAS,EAAGQ,SAAS,IAAK;QACvC,MAAMC,WAAW,GAAGD,SAAS,CAACE,MAAM,CAACC,SAAS,CAAC,CAAC;QAChD,MAAMC,MAAM,GAAGH,WAAW,CAACf,GAAG;QAC9B,MAAMmB,MAAM,GAAGJ,WAAW,CAACd,GAAG;QAE9BoB,aAAa,CAACD,eAAe,CAAC,gDAAgD,CAAC;QAE/E,IAAIhC,gBAAgB,EAAE;UAClBA,gBAAgB,CAAC8B,MAAM,EAAEC,MAAM,CAAC;QACpC;MACJ,CAAC,CAAC;IACN;IAEA1B,MAAM,CAACI,UAAU,CAAC;;IAElB;IACA,OAAO,MAAM;MACT,IAAIA,UAAU,EAAE;QACZA,UAAU,CAACyB,MAAM,CAAC,CAAC;MACvB;IACJ,CAAC;EACL,CAAC,EAAE,CAAClC,gBAAgB,EAAEC,aAAa,CAAC,CAAC;;EAErC;EACAhB,SAAS,CAAC,MAAM;IACZ,IAAImB,GAAG,IAAIH,aAAa,EAAE;MACtBG,GAAG,CAACO,OAAO,CAAC,CAACV,aAAa,CAACW,GAAG,EAAEX,aAAa,CAACY,GAAG,CAAC,EAAE,EAAE,CAAC;IAC3D;EACJ,CAAC,EAAE,CAACT,GAAG,EAAEH,aAAa,CAAC,CAAC;EAExB,oBACIX,OAAA;IACI6C,GAAG,EAAEhC,MAAO;IACZiC,KAAK,EAAE;MACHC,KAAK,EAAE,MAAM;MACbC,MAAM,EAAE,OAAO;MACfC,YAAY,EAAE,KAAK;MACnBC,MAAM,EAAE;IACZ;EAAE;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACL,CAAC;AAEV,CAAC;AAAC1C,EAAA,CA/GIH,YAAY;AAAA8C,EAAA,GAAZ9C,YAAY;AAiHlB,eAAeA,YAAY;AAAC,IAAA8C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}