{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\saksh\\\\OneDrive\\\\Desktop\\\\DS\\\\civiceye\\\\civiceye\\\\frontend\\\\src\\\\pages\\\\AdminIssuesUpdates.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport axios from 'axios';\nimport { LayoutDashboard, AlertCircle, Users, FileText, Clock, CheckCircle, XCircle, ArrowRight, Calendar, Loader2 } from 'lucide-react';\nimport './AdminIssuesUpdates.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://localhost:3000/api/v1';\n\n// ---------------- Utility Functions ----------------\nconst getStatusBadgeClass = status => {\n  const statusMap = {\n    'pending': 'status-pending',\n    'in progress': 'status-progress',\n    'inreview': 'status-review',\n    'resolved': 'status-resolved',\n    'recived': 'status-pending'\n  };\n  return statusMap[status.toLowerCase()] || 'status-default';\n};\nconst getUserInitials = name => {\n  if (!name) return 'AD';\n  return name.split(' ').map(part => part[0]).join('').toUpperCase();\n};\n\n// ---------------- Component ----------------\nconst AdminIssueUpdates = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    user,\n    signOut\n  } = useAuth();\n  const [updates, setUpdates] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [fetchError, setFetchError] = useState(null);\n  const [processing, setProcessing] = useState(false);\n\n  // --- Fetch Pending Updates ---\n  const fetchUpdates = useCallback(async () => {\n    if (!user) return;\n    setLoading(true);\n    setFetchError(null);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/complaints/pending-requests`, {\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        }\n      });\n\n      // Ensure we filter only issues that have pending updates\n      const pendingUpdates = response.data.data.filter(comp => comp.pendingUpdate === true);\n      const mappedUpdates = pendingUpdates.map(comp => ({\n        id: comp._id,\n        issueTitle: comp.title,\n        volunteer: comp.assignedTo || 'Unknown Volunteer',\n        statusChange: comp.statusChange || {\n          from: 'In Progress',\n          to: 'Resolved'\n        },\n        submittedDate: new Date(comp.updatedAt).toLocaleDateString(),\n        proofPhoto: comp.photo ? 'Available' : 'None',\n        notes: comp.workNotes || comp.description || '',\n        resolution: comp.resolution || 'This update marks the issue as completed. Approving will set status to Resolved.'\n      }));\n      setUpdates(mappedUpdates);\n    } catch (err) {\n      var _err$response;\n      console.error(\"Fetch Error:\", ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message);\n      setFetchError('Failed to fetch issue updates.');\n    } finally {\n      setLoading(false);\n    }\n  }, [user]);\n  useEffect(() => {\n    fetchUpdates();\n  }, [fetchUpdates]);\n\n  // --- Approve Update ---\n  const handleApprove = async updateId => {\n    if (processing || !window.confirm('Approve this status update? Status will be set to RESOLVED.')) return;\n    setProcessing(true);\n    try {\n      await axios.put(`${API_BASE_URL}/complaints/${updateId}`, {\n        status: 'resolved',\n        pendingUpdate: false\n      }, {\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        }\n      });\n      alert('Status update approved successfully! Issue is now Resolved.');\n      setUpdates(updates.filter(u => u.id !== updateId));\n    } catch (error) {\n      var _error$response, _error$response2, _error$response2$data;\n      console.error(\"Approval failed:\", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n      alert('Approval failed: ' + (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Server error.'));\n    } finally {\n      setProcessing(false);\n    }\n  };\n\n  // --- Reject Update ---\n  const handleReject = async updateId => {\n    if (processing) return;\n    const reason = window.prompt('Please provide a reason for rejection (required):');\n    if (reason && reason.trim()) {\n      setProcessing(true);\n      try {\n        await axios.put(`${API_BASE_URL}/complaints/${updateId}`, {\n          status: 'in progress',\n          rejectionNote: reason,\n          pendingUpdate: false\n        }, {\n          headers: {\n            Authorization: `Bearer ${user.token}`\n          }\n        });\n        alert('Status update rejected. Volunteer notified. Issue status reset to In Progress.');\n        setUpdates(updates.filter(u => u.id !== updateId));\n      } catch (error) {\n        var _error$response3, _error$response4, _error$response4$data;\n        console.error(\"Rejection failed:\", ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || error.message);\n        alert('Rejection failed: ' + (((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || 'Server error.'));\n      } finally {\n        setProcessing(false);\n      }\n    } else if (reason !== null) {\n      alert('Rejection requires a reason.');\n    }\n  };\n  const handleLogout = () => {\n    if (window.confirm('Are you sure you want to logout?')) {\n      signOut();\n      navigate('/');\n    }\n  };\n  if (!user) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading-state\",\n    children: \"Authenticating...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-issue-updates\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"admin-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"admin-header-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"admin-logo\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"admin-logo-text\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"admin-logo-title\",\n              children: \"CivicEye\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"admin-logo-subtitle\",\n              children: \"Civic Platform\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n          className: \"admin-nav\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/admin-dashboard\",\n            className: \"admin-nav-link\",\n            children: [/*#__PURE__*/_jsxDEV(LayoutDashboard, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 29\n            }, this), \" Dashboard\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/admin-all-issues\",\n            className: \"admin-nav-link\",\n            children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 29\n            }, this), \" All Issues\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/admin-users-volunteers\",\n            className: \"admin-nav-link\",\n            children: [/*#__PURE__*/_jsxDEV(Users, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 29\n            }, this), \" Users & Volunteers\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/admin-requests\",\n            className: \"admin-nav-link\",\n            children: [/*#__PURE__*/_jsxDEV(FileText, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 29\n            }, this), \" Admin Request\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/admin-issues-updates\",\n            className: \"admin-nav-link active\",\n            children: [/*#__PURE__*/_jsxDEV(Clock, {\n              size: 18\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 29\n            }, this), \" Issue Updates\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-profile\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/AdminProfile\",\n          className: \"profile-link\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-initials\",\n            children: getUserInitials(user.name)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"user-name\",\n            children: user.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogout,\n          className: \"logout-btn-header\",\n          children: /*#__PURE__*/_jsxDEV(ArrowRight, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"updates-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"updates-page-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"updates-page-title\",\n          children: \"Issue Updates\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"updates-page-subtitle\",\n          children: \"Review and approve status updates submitted by volunteers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-message\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          size: 24,\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 25\n        }, this), \" Fetching pending updates...\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }, this), fetchError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: [\"Error: \", fetchError]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 32\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"updates-list\",\n        children: [!loading && updates.length === 0 && !fetchError && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-updates-message\",\n          children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n            size: 32\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No pending updates requiring administrative review.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 25\n        }, this), updates.map(update => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"update-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"update-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"update-title-section\",\n              children: [/*#__PURE__*/_jsxDEV(Clock, {\n                size: 16,\n                className: \"update-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"update-title\",\n                children: update.issueTitle\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"volunteer-name\",\n              children: [\"Updated by \", update.volunteer]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"update-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"status-change-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"label\",\n                children: \"Status Change:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"status-badges\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `status-badge ${getStatusBadgeClass(update.statusChange.from)}`,\n                  children: update.statusChange.from\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"status-arrow\",\n                  children: \"\\u2192\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `status-badge ${getStatusBadgeClass(update.statusChange.to)}`,\n                  children: update.statusChange.to\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"update-meta\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"meta-item\",\n                children: [/*#__PURE__*/_jsxDEV(Calendar, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"meta-label\",\n                  children: \"Submitted\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"meta-value\",\n                  children: update.submittedDate\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"meta-item\",\n                children: [/*#__PURE__*/_jsxDEV(FileText, {\n                  size: 14\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"meta-label\",\n                  children: \"Proof Photo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"meta-value\",\n                  children: update.proofPhoto\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"volunteer-notes-section\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"notes-label\",\n                children: \"Volunteer Notes:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"notes-text\",\n                children: update.notes\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"update-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"action-btn approve-btn\",\n              onClick: () => handleApprove(update.id),\n              disabled: processing,\n              children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 37\n              }, this), processing ? /*#__PURE__*/_jsxDEV(Loader2, {\n                size: 16,\n                className: \"spinner\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 51\n              }, this) : 'Approve']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"action-btn reject-btn\",\n              onClick: () => handleReject(update.id),\n              disabled: processing,\n              children: [/*#__PURE__*/_jsxDEV(XCircle, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 37\n              }, this), \"Reject\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 29\n          }, this)]\n        }, update.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 9\n  }, this);\n};\n_s(AdminIssueUpdates, \"48fg3PikpZqu9VHgztiAfM8NK58=\", false, function () {\n  return [useNavigate, useAuth];\n});\n_c = AdminIssueUpdates;\nexport default AdminIssueUpdates;\nvar _c;\n$RefreshReg$(_c, \"AdminIssueUpdates\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","Link","useAuth","axios","LayoutDashboard","AlertCircle","Users","FileText","Clock","CheckCircle","XCircle","ArrowRight","Calendar","Loader2","jsxDEV","_jsxDEV","API_BASE_URL","getStatusBadgeClass","status","statusMap","toLowerCase","getUserInitials","name","split","map","part","join","toUpperCase","AdminIssueUpdates","_s","navigate","user","signOut","updates","setUpdates","loading","setLoading","fetchError","setFetchError","processing","setProcessing","fetchUpdates","response","get","headers","Authorization","token","pendingUpdates","data","filter","comp","pendingUpdate","mappedUpdates","id","_id","issueTitle","title","volunteer","assignedTo","statusChange","from","to","submittedDate","Date","updatedAt","toLocaleDateString","proofPhoto","photo","notes","workNotes","description","resolution","err","_err$response","console","error","message","handleApprove","updateId","window","confirm","put","alert","u","_error$response","_error$response2","_error$response2$data","handleReject","reason","prompt","trim","rejectionNote","_error$response3","_error$response4","_error$response4$data","handleLogout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","size","onClick","length","update","disabled","_c","$RefreshReg$"],"sources":["C:/Users/saksh/OneDrive/Desktop/DS/civiceye/civiceye/frontend/src/pages/AdminIssuesUpdates.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport axios from 'axios';\r\nimport { \r\n    LayoutDashboard, AlertCircle, Users, FileText, \r\n    Clock, CheckCircle, XCircle, ArrowRight,\r\n    Calendar, Loader2\r\n} from 'lucide-react';\r\nimport './AdminIssuesUpdates.css';\r\n\r\nconst API_BASE_URL = 'http://localhost:3000/api/v1';\r\n\r\n// ---------------- Utility Functions ----------------\r\nconst getStatusBadgeClass = (status) => {\r\n    const statusMap = {\r\n        'pending': 'status-pending',\r\n        'in progress': 'status-progress',\r\n        'inreview': 'status-review',\r\n        'resolved': 'status-resolved',\r\n        'recived': 'status-pending'\r\n    };\r\n    return statusMap[status.toLowerCase()] || 'status-default';\r\n};\r\n\r\nconst getUserInitials = (name) => {\r\n    if (!name) return 'AD';\r\n    return name.split(' ').map(part => part[0]).join('').toUpperCase();\r\n};\r\n\r\n// ---------------- Component ----------------\r\nconst AdminIssueUpdates = () => {\r\n    const navigate = useNavigate();\r\n    const { user, signOut } = useAuth();\r\n\r\n    const [updates, setUpdates] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [fetchError, setFetchError] = useState(null);\r\n    const [processing, setProcessing] = useState(false);\r\n\r\n    // --- Fetch Pending Updates ---\r\n    const fetchUpdates = useCallback(async () => {\r\n        if (!user) return;\r\n        setLoading(true);\r\n        setFetchError(null);\r\n\r\n        try {\r\n            const response = await axios.get(`${API_BASE_URL}/complaints/pending-requests`, {\r\n                headers: { Authorization: `Bearer ${user.token}` }\r\n            });\r\n\r\n            // Ensure we filter only issues that have pending updates\r\n            const pendingUpdates = response.data.data.filter(comp => comp.pendingUpdate === true);\r\n\r\n            const mappedUpdates = pendingUpdates.map(comp => ({\r\n    id: comp._id,\r\n    issueTitle: comp.title,\r\n    volunteer: comp.assignedTo || 'Unknown Volunteer',\r\n    statusChange: comp.statusChange || { from: 'In Progress', to: 'Resolved' },\r\n    submittedDate: new Date(comp.updatedAt).toLocaleDateString(),\r\n    proofPhoto: comp.photo ? 'Available' : 'None',\r\n    notes: comp.workNotes || comp.description || '',\r\n    resolution: comp.resolution || 'This update marks the issue as completed. Approving will set status to Resolved.'\r\n}));\r\n\r\n\r\n            setUpdates(mappedUpdates);\r\n        } catch (err) {\r\n            console.error(\"Fetch Error:\", err.response?.data || err.message);\r\n            setFetchError('Failed to fetch issue updates.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [user]);\r\n\r\n    useEffect(() => {\r\n        fetchUpdates();\r\n    }, [fetchUpdates]);\r\n\r\n    // --- Approve Update ---\r\n    const handleApprove = async (updateId) => {\r\n        if (processing || !window.confirm('Approve this status update? Status will be set to RESOLVED.')) return;\r\n\r\n        setProcessing(true);\r\n        try {\r\n            await axios.put(`${API_BASE_URL}/complaints/${updateId}`, \r\n                { status: 'resolved', pendingUpdate: false }, \r\n                { headers: { Authorization: `Bearer ${user.token}` } }\r\n            );\r\n\r\n            alert('Status update approved successfully! Issue is now Resolved.');\r\n            setUpdates(updates.filter(u => u.id !== updateId));\r\n        } catch (error) {\r\n            console.error(\"Approval failed:\", error.response?.data || error.message);\r\n            alert('Approval failed: ' + (error.response?.data?.message || 'Server error.'));\r\n        } finally {\r\n            setProcessing(false);\r\n        }\r\n    };\r\n\r\n    // --- Reject Update ---\r\n    const handleReject = async (updateId) => {\r\n        if (processing) return;\r\n        const reason = window.prompt('Please provide a reason for rejection (required):');\r\n\r\n        if (reason && reason.trim()) {\r\n            setProcessing(true);\r\n            try {\r\n                await axios.put(`${API_BASE_URL}/complaints/${updateId}`, \r\n                    { status: 'in progress', rejectionNote: reason, pendingUpdate: false }, \r\n                    { headers: { Authorization: `Bearer ${user.token}` } }\r\n                );\r\n\r\n                alert('Status update rejected. Volunteer notified. Issue status reset to In Progress.');\r\n                setUpdates(updates.filter(u => u.id !== updateId));\r\n            } catch (error) {\r\n                console.error(\"Rejection failed:\", error.response?.data || error.message);\r\n                alert('Rejection failed: ' + (error.response?.data?.message || 'Server error.'));\r\n            } finally {\r\n                setProcessing(false);\r\n            }\r\n        } else if (reason !== null) {\r\n            alert('Rejection requires a reason.');\r\n        }\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        if (window.confirm('Are you sure you want to logout?')) {\r\n            signOut();\r\n            navigate('/');\r\n        }\r\n    };\r\n\r\n    if (!user) return <div className=\"loading-state\">Authenticating...</div>;\r\n\r\n    return (\r\n        <div className=\"admin-issue-updates\">\r\n            <header className=\"admin-header\">\r\n                <div className=\"admin-header-left\">\r\n                    <div className=\"admin-logo\">\r\n                        \r\n                        <div className=\"admin-logo-text\">\r\n                            <div className=\"admin-logo-title\">CivicEye</div>\r\n                            <div className=\"admin-logo-subtitle\">Civic Platform</div>\r\n                        </div>\r\n                    </div>\r\n                    <nav className=\"admin-nav\">\r\n                        <Link to=\"/admin-dashboard\" className=\"admin-nav-link\">\r\n                            <LayoutDashboard size={18} /> Dashboard\r\n                        </Link>\r\n                        <Link to=\"/admin-all-issues\" className=\"admin-nav-link\">\r\n                            <AlertCircle size={18} /> All Issues\r\n                        </Link>\r\n                        <Link to=\"/admin-users-volunteers\" className=\"admin-nav-link\">\r\n                            <Users size={18} /> Users & Volunteers\r\n                        </Link>\r\n                        <Link to=\"/admin-requests\" className=\"admin-nav-link\">\r\n                            <FileText size={18} /> Admin Request\r\n                        </Link>\r\n                        <Link to=\"/admin-issues-updates\" className=\"admin-nav-link active\">\r\n                            <Clock size={18} /> Issue Updates\r\n                        </Link>\r\n                    </nav>\r\n                </div>\r\n                <div className=\"user-profile\">\r\n                    <Link to=\"/AdminProfile\" className=\"profile-link\">\r\n                        <div className=\"user-initials\">{getUserInitials(user.name)}</div>\r\n                        <span className=\"user-name\">{user.name}</span>\r\n                    </Link>\r\n                    <button onClick={handleLogout} className=\"logout-btn-header\">\r\n                        <ArrowRight size={20} />\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            <div className=\"updates-container\">\r\n                <div className=\"updates-page-header\">\r\n                    <h1 className=\"updates-page-title\">Issue Updates</h1>\r\n                    <p className=\"updates-page-subtitle\">Review and approve status updates submitted by volunteers</p>\r\n                </div>\r\n\r\n                {loading && (\r\n                    <div className=\"loading-message\">\r\n                        <Loader2 size={24} className=\"spinner\" /> Fetching pending updates...\r\n                    </div>\r\n                )}\r\n                {fetchError && <div className=\"error-message\">Error: {fetchError}</div>}\r\n\r\n                <div className=\"updates-list\">\r\n                    {!loading && updates.length === 0 && !fetchError && (\r\n                        <div className=\"no-updates-message\">\r\n                            <CheckCircle size={32} />\r\n                            <p>No pending updates requiring administrative review.</p>\r\n                        </div>\r\n                    )}\r\n\r\n                    {updates.map((update) => (\r\n                        <div key={update.id} className=\"update-card\">\r\n                            <div className=\"update-header\">\r\n                                <div className=\"update-title-section\">\r\n                                    <Clock size={16} className=\"update-icon\" />\r\n                                    <h3 className=\"update-title\">{update.issueTitle}</h3>\r\n                                </div>\r\n                                <span className=\"volunteer-name\">Updated by {update.volunteer}</span>\r\n                            </div>\r\n\r\n                            <div className=\"update-body\">\r\n                                <div className=\"status-change-section\">\r\n                                    <div className=\"label\">Status Change:</div>\r\n                                    <div className=\"status-badges\">\r\n                                        <span className={`status-badge ${getStatusBadgeClass(update.statusChange.from)}`}>\r\n                                            {update.statusChange.from}\r\n                                        </span>\r\n                                        <span className=\"status-arrow\">â†’</span>\r\n                                        <span className={`status-badge ${getStatusBadgeClass(update.statusChange.to)}`}>\r\n                                            {update.statusChange.to}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"update-meta\">\r\n                                    <div className=\"meta-item\">\r\n                                        <Calendar size={14} />\r\n                                        <span className=\"meta-label\">Submitted</span>\r\n                                        <span className=\"meta-value\">{update.submittedDate}</span>\r\n                                    </div>\r\n                                    <div className=\"meta-item\">\r\n                                        <FileText size={14} />\r\n                                        <span className=\"meta-label\">Proof Photo</span>\r\n                                        <span className=\"meta-value\">{update.proofPhoto}</span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"volunteer-notes-section\">\r\n                                    <div className=\"notes-label\">Volunteer Notes:</div>\r\n                                    <p className=\"notes-text\">{update.notes}</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"update-actions\">\r\n                                <button \r\n                                    className=\"action-btn approve-btn\"\r\n                                    onClick={() => handleApprove(update.id)}\r\n                                    disabled={processing}\r\n                                >\r\n                                    <CheckCircle size={16} />\r\n                                    {processing ? <Loader2 size={16} className=\"spinner\" /> : 'Approve'}\r\n                                </button>\r\n                                <button \r\n                                    className=\"action-btn reject-btn\"\r\n                                    onClick={() => handleReject(update.id)}\r\n                                    disabled={processing}\r\n                                >\r\n                                    <XCircle size={16} />\r\n                                    Reject\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AdminIssueUpdates;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}